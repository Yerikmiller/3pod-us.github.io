{"version":3,"file":"support_service_controller.js","sources":["../../../../node_modules/svelte/src/runtime/internal/utils.js","../../../../node_modules/svelte/src/shared/version.js","../../../../node_modules/svelte/src/runtime/store/index.js","../../../../node_modules/svelte/src/runtime/internal/disclose-version/index.js","../../../../src/RouterStore.js","../../../../src/libraries/turpial.js","../../../../node_modules/ramda/es/internal/_curry1.js","../../../../node_modules/ramda/es/internal/_isPlaceholder.js","../../../../node_modules/ramda/es/type.js","../../../../node_modules/ramda/es/internal/_clone.js","../../../../node_modules/ramda/es/internal/_cloneRegExp.js","../../../../node_modules/ramda/es/clone.js","../../../../src/libraries/ApplicationData.js","../../../../src/libraries/FormatDate.js","../../../../src/libraries/calendari18n.js","../../../../src/libraries/coreApp/support_customer_service.js","../../../../src/controllers/support_service_controller.js"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n *\n * https://svelte.dev/docs/svelte-compiler#svelte-version\n * @type {string}\n */\nexport const VERSION = '4.2.19';\nexport const PUBLIC_VERSION = '4';\n","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","import { PUBLIC_VERSION } from '../../../shared/version.js';\n\nif (typeof window !== 'undefined')\n\t// @ts-ignore\n\t(window.__svelte || (window.__svelte = { v: new Set() })).v.add(PUBLIC_VERSION);\n","import { writable } from 'svelte/store';\r\nimport OnUnsavedChanges from './components/Modals/OnUnsavedChanges.svelte';\r\n\r\n\r\nlet RouterStoreType = {\r\n    parameters: {},\r\n    props: {},\r\n    action_name: null,\r\n    role: null,\r\n    controller_name: null,\r\n    has_footer: false,\r\n    has_sidebar: false,\r\n    has_header: false,\r\n    has_navbar_mobile: false,        \r\n    has_space_fixed_to_top: false,\r\n    classes: \"\",\r\n    Footer: null,\r\n    subtemplate: null,\r\n    BoxHeader: null,\r\n    user: null,\r\n    styles_box: null,\r\n    breadcrumbs: {},\r\n    setGridStylesAuto: ()=>{},\r\n    updateGridStyles: ()=>{},\r\n    updateHeaderComponent: ()=>{},\r\n    updateSidebarComponent: ()=>{},\r\n    updateNavBarMobileComponent: ()=>{},\r\n    updateBoxHeaderComponent: ()=>{},\r\n    updateFooterComponent: ()=>{},\r\n    updateHasHeader: ()=>{},\r\n    updateHasFooter: ()=>{},\r\n    updateHasSidebar: ()=>{},\r\n    updateHasNavbarMobile: ()=>{},\r\n    updateHasSpaceFixedToTop: ()=>{},\r\n    updateProperties: (properties)=>{}\r\n};\r\n\r\nfunction routerStore() {\r\n    /**\r\n     * @type {RouterStoreType}\r\n     */\r\n    let defaultElement = RouterStoreType;\r\n\tconst { subscribe, update } = writable(defaultElement);\r\n\t\r\n\tconst routes = {\r\n        subscribe: subscribe,\r\n        set: (field, new_data)=>{\r\n            update(( data )=>{\r\n                data[field] = new_data;\r\n                return data;\r\n            })\r\n        },\r\n        updateField: (field, new_data)=>{\r\n            let object = {};\r\n            update(( data )=>{\r\n                data[field] = new_data;\r\n                object = data;\r\n                return data;\r\n            })\r\n\r\n            return object;\r\n        },        \r\n        update: (new_data)=>{\r\n            update(( data )=>{\r\n                Object.values(new_data).map((item, key)=>{\r\n                    let name = Object.keys(new_data)[key];\r\n\r\n                    data[name] = item;\r\n                })\r\n                \r\n                return data;\r\n            })\r\n\r\n            return new_data;\r\n        },\r\n        updateBreadcrumbs(properties){\r\n            update(( data )=>{\r\n                data.breadcrumbs = properties\r\n                return data;\r\n            })\r\n\r\n            return properties;\r\n        },\r\n        /**\r\n         * @returns {RouterStoreType}\r\n         */\r\n        get: function(){\r\n            let returns = {};\r\n            update(function( data ){\r\n                returns = data;\r\n                return data;\r\n            })\r\n            return returns;\r\n        }\r\n    }\r\n    return routes;\r\n}\r\n\r\n\r\nconst RouterStore = routerStore();\r\nexport {RouterStore, RouterStoreType}","/**\r\n * @type {window}\r\n */\r\nlet WindowObject = {};\r\n\r\n/**\r\n * @type {document}\r\n */\r\nlet DocumentObject = {};\r\n\r\nlet has_window = true;\r\nlet has_document = true;\r\n\r\nif(typeof window === \"undefined\"){\r\n\tif(typeof globalThis !== \"undefined\"){\r\n\t\tWindowObject = globalThis?.$page ?? {};\r\n\t}else{\r\n\t\tWindowObject = {};\r\n\t}\r\n\thas_window = false;\r\n}else{\r\n\tWindowObject = window;\r\n\thas_window = true;\r\n}\r\n\r\nif(typeof document === \"undefined\"){\r\n\tif(typeof globalThis !== \"undefined\"){\r\n\t\tDocumentObject = globalThis?.$page ?? {};\r\n\t}else{\r\n\t\tDocumentObject = {};\r\n\t}\r\n\thas_document = false;\r\n}else{\r\n\tDocumentObject = document;\r\n\thas_document = true;\r\n}\r\n\r\n/*\r\n  _______ _    _ _____  _____ _____          _             _  _____ \r\n |__   __| |  | |  __ \\|  __ \\_   _|   /\\   | |           | |/ ____|\r\n    | |  | |  | | |__) | |__) || |    /  \\  | |           | | (___  \r\n    | |  | |  | |  _  /|  ___/ | |   / /\\ \\ | |       _   | |\\___ \\ \r\n    | |  | |__| | | \\ \\| |    _| |_ / ____ \\| |____  | |__| |____) |\r\n    |_|   \\____/|_|  \\_\\_|   |_____/_/    \\_\\______|  \\____/|_____/ \r\n    * Turpial JS Library V. 1.0.0\r\n    * License: MIT.\r\n    * Copyright Yorman Maricuto, May 2019.\r\n    * @twitter: @MaricutoYorman, @Instagram: maricuto\r\n    * Micro-Library to create web components, multi-fetch elements, append styles, scripts, templating engine JSX\r\n*/\r\nclass Turpial\r\n{\r\n\tstatic $WindowObject = WindowObject;\r\n\tstatic $DocumentObject = DocumentObject;\r\n\tstatic $has_window = has_window;\r\n\tstatic $has_document = has_document;\r\n\tconstructor( tpObj = {} )\r\n\t{\r\n\t\t// this is for generate\r\n\t\t// a family tree of birds \r\n\t\t// (parents-childrens -> map)\r\n\t\t// this is is to control realDOM (update-delete-insert-read)\r\n\t\tthis.birds = [];\r\n\t\tthis.un = (v, r = \"\")=> {\r\n\t\t\tif(typeof v === \"undefined\"){return r;}\r\n\t\t\telse{return v;}\r\n\t\t};\r\n\t\tthis.searchStr = (where, what, position = false)=>{\r\n\t\t\tlet search = where.search( what );\r\n\t\t\tif(search === -1){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(position === true){return search;}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tthis.replacement = (target, search, replacement)=>{\r\n\t\t\treturn target.split( search ).join( replacement )\r\n\t\t}\r\n\t\tthis.find = (selector)=>{\r\n\t\t\tif(typeof selector === \"string\"){\r\n\t\t\t\treturn document.getElementById(selector);\r\n\t\t\t}else{return selector;}\r\n\t\t}\r\n\t\t// helpers\r\n\t\tthis.ext = \".turpial.js\";\t\t\r\n\t\tthis.allowStateEvents = this.un(tpObj.allowStateEvents, false);\r\n\t\tthis.loadModulesOnRoute = this.un(tpObj.loadModulesOnRoute, true);\r\n\t\tthis.autoloader = this.un( tpObj.autoloader, false );\r\n\t\tthis.autoloader_folder = this.un( tpObj.autoloader_folder, \"\" );\r\n\t\tthis.cache = this.un( tpObj.cache, \"public\" );\r\n\t\tthis.public_path = this.un( tpObj.public_path, \"\" );\r\n\t\tthis.core_path = this.un( tpObj.core_path, \"\" );\r\n\t\tthis.folder = this.un( tpObj.core_path, \"/turpial/\" );\r\n\t\tthis.loader = {};\r\n\t\tthis.httpRequests = [];\r\n\t\tthis.loader.show = this.un( tpObj.loaderShow, null );\r\n\t\tthis.loader.hide = this.un( tpObj.loaderHide, null );\r\n\t\tthis.views = {};\r\n\t\tthis.statusResources = \"loaded\";\r\n\t\tthis.resources = {};\r\n\t\tthis.myComponents = [];\r\n\t\tthis.random_string = (length) => {\r\n\t\t\t\"undefined\"==typeof length&&(length=6);for(var result=\"\",characters=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",charactersLength=characters.length,i=0;i<length;i++)result+=characters.charAt(Math.floor(Math.random()*charactersLength));\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tthis.selectData = ( arr, item, value, return_key )=> {\r\n\t\t\treturn_key = turpial.un(return_key, false);\r\n\t\t\tvar get = \"\";\r\n\t\t\tarr.forEach(function( dta, key ){\t\r\n\t\t\t\tif(dta[item] == value){\r\n\r\n\t\t\t\t\tif(return_key === true){\r\n\t\t\t\t\t\tget = key;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tget = dta;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn get;\r\n\t\t}\r\n\t\tthis.component = {\r\n\t\t\tapplyProps: ( tag, props )=>{\r\n\t\t\t\tconst applying = ()=>{\r\n\t\t\t\t\tconst elements = document.querySelectorAll( tag );\r\n\t\t\t\t\t// like a spread operator\r\n\t\t\t\t\tArray.prototype.slice.call(elements). \r\n              \t\tforEach(function(el){\r\n                 \t\tprops(el);\r\n            \t\t})\r\n\t\t\t\t}\r\n\t\t\t\tconst implement = ()=>{\r\n\t\t\t\t\tif(this.statusResources\t=== \"loading\"){\r\n\t\t\t\t\t\tvar limit = 0;\r\n\t\t\t\t\t\tvar interval = setInterval(()=>{\r\n\t\t\t\t\t\t\tif(limit > 6000){\r\n\t\t\t\t\t\t\t\tconsole.warn(\"error loading resources and applying components\");\r\n\t\t\t\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlimit = limit + 20;\r\n\t\t\t\t\t\t\tif(this.statusResources\t=== \"loaded\"){\r\n\t\t\t\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\t\t\t\tapplying( tag, props );\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 20)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tapplying( tag, props );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tTurpial.$WindowObject.addEventListener(\"load\", ()=>{\r\n\t\t\t\t\timplement();return;\r\n\t\t\t\t})\r\n\t\t\t\tif(document.readyState === \"complete\"){\r\n\t\t\t\timplement();return;}\t\t\t\r\n\t\t\t},\r\n\t\t\tset: (obj)=>{\r\n\t\t\t\tconst app = this;\r\n\t\t\t\tconst component = app.component;\r\n\t\t\t\tvar props = obj.props;\r\n\t\t\t\tvar tag = obj.tag;\r\n\t\t\t\tapp.myComponents.push( {tag: tag, props: props} );\r\n\t\t\t\tvar extendTo = app.un( obj.extends, null );\t\t\t\t\r\n\t\t\t\tif(extendTo !== null){extendTo = {extends: extendTo} }\r\n\t\t\t\tif(typeof Turpial.$WindowObject.customElements === \"undefined\"){\r\n\t\t\t\t\tapp.component.olderVerBrow = ()=>{\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcomponent.applyProps( tag, props );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar get = Turpial.$WindowObject.customElements.get(tag);\r\n\t\t\t\tif(typeof get !== \"undefined\"){return;}\r\n\t\t\t\tTurpial.$WindowObject.customElements.define(tag, class extends HTMLElement {\r\n\t\t\t\t\tconstructor( props = obj.props ){\r\n\t\t\t\t\t\tsuper(((props)=>{\r\n\t\t\t\t\t\t\t// on load window or document loaded...\r\n\t\t\t\t\t\t\tcomponent.applyProps( tag, props );\r\n\t\t\t\t\t\t})(props));\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}, extendTo);\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.view = {};\r\n\t\tthis.models = {};\r\n\t\tthis.models.sources = {};\r\n\t\tthis.controller = {};\t\r\n\t\tthis.urls = {};\r\n\t\tthis.filesLoaded = {};\r\n\t\tthis.inject = (files, props)=>{\r\n\t\t\tprops = props || {};\r\n\t\t\tfor(const file of files){\r\n\t\t\t\tprops.target = props.target || document.head;\r\n\t\t\t\tif(this.filesLoaded[ file ].tagName === \"STYLE\"){\r\n\t\t\t\t\tthis.filesLoaded[ file ].innerHTML = this.filesLoaded[ file ].text;\r\n\t\t\t\t}\r\n\t\t\t\tif(Array.isArray(props.target)){\r\n\t\t\t\t\tlet targets = props.target;\r\n\t\t\t\t\ttargets.map((target)=>{\r\n\t\t\t\t\t\tlet script = this.filesLoaded[ file ].clodeNode(true);\r\n\t\t\t\t\t\ttarget.appendChild( script );\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tprops.target.appendChild( this.filesLoaded[ file ] );\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t// end helpers\r\n\t\tthis.models.fetch = (obj)=>{\r\n\t\t\tlet app = this;\r\n\t\t\tlet type = obj.type || \"script\";\r\n\t\t\tconst cancelOnResend =\tapp.un(obj.cancelOnResend, null );\r\n\t\t\tconst headers = app.un(obj.options, null );\r\n\t\t\tconst method = app.un(obj.method, \"GET\" );\r\n\t\t\tconst attributes = app.un(obj.attributes, [] );\r\n\r\n\t\t\tobj.url = obj.url || [];\r\n\t\t\tobj.file = obj.file || obj.url;\r\n\t\t\tobj.files = obj.files || obj.file;\r\n\t\t\tobj.multidata = obj.multidata || false;\r\n\t\t\t\r\n\r\n\t\t\tvar files = obj.files;\r\n\r\n\t\t\tif(typeof obj.ready === \"undefined\"){obj.ready = ()=>{}}\r\n\t\t\tif(typeof files === \"string\"){files = [ files ];}\t\r\n\t\t\tconst Head = document.head;\r\n\t\t\tconst loaded = [];\r\n\t\t\tconst unloaded = [];\r\n\t\t\tlet text = [];\r\n\t\t\tobj.getString = ( r )=>{return r.clone().text();}\r\n\t\t\tobj.fetching = ( file, body )=>{\r\n\r\n\t\t\t\t// remove if the element exist \r\n\t\t\t\t// to not create scripts elements with the same things...\r\n\t\t\t\t// just ignoring or stopping the re-injecting will fail...\r\n\t\t\t\tif(typeof app.filesLoaded[file] !== \"undefined\" && type === \"script\")\r\n\t\t\t\t{app.filesLoaded[file].remove()}\r\n\t\t\t\tvar request = new XMLHttpRequest();\t\t\t\t\r\n\t\t\t\trequest.open(method, file, true);\r\n\t\t\t\tconst options = [];\r\n\t\t\t\tconst headersValues = [];\r\n\r\n\t\t\t\tif(headers !== null){\r\n\t\t\t\t\tfor(var header in headers){\r\n\t\t\t\t\t\theadersValues.push( headers[header] );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tObject.keys(headers).forEach(function(name, k){\r\n\t\t\t\t\t\toptions.push( [ name, headersValues[k]] )\r\n\t\t\t\t\t});\t\t\t\r\n\t\t\t\t\toptions.forEach(function(option){\r\n\t\t\t\t\t\trequest.setRequestHeader( option[0], option[1] );\t\t\t\t\t\r\n\t\t\t\t\t})\t\r\n\t\t\t\t}\r\n\t\t\t\trequest.onload = function() {\r\n\t\t\t\t if (request.status >= 200 && request.status < 400) {\r\n\t\t\t\t \tvar resource = request.responseText;\r\n\t\t\t\t \ttext.push( resource );\r\n\t\t\t\t \tvar elementTag;\r\n\t\t\t\t \tif(type === \"script\" || type === \"style\" || type === \"link\"){\r\n\t\t\t\t \t\telementTag = type;\r\n\t\t\t\t \t}else{\r\n\t\t\t\t \t\t// if tag name is another than both above.\r\n\t\t\t\t \t\telementTag = \"script\"; \r\n\t\t\t\t \t}\t\t\t\t \t\r\n\t\t\t\t\tvar el = document.createElement(elementTag);\r\n\r\n\t\t\t\t\tattributes.map(( attribute )=>{\r\n\t\t\t\t\t\t// Example: <script [name]=[content] src=\"...\"></script>\r\n\t\t\t\t\t\tel.setAttribute(attribute.name, attribute.content);\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tif(type === \"style\"){\r\n\t\t\t\t\t\tel.type = \"text/css\";\r\n\t\t\t\t\t}else if(type === \"link\"){\r\n\t\t\t\t\t\tel.rel = \"stylesheet\";\r\n\t\t\t\t\t\tel.media = \"all\";\r\n\t\t\t\t\t\tel.href = file;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.text = resource;\r\n\t\t\t\t\tapp.filesLoaded[ file ] = el;\r\n\t\t\t\t\tloaded.push( file );\t\t\t\t \t\r\n\t\t\t\t }else{\r\n\t\t\t\t \tif(typeof obj.onerror === \"function\" && request.status >= 400){\r\n\t\t\t\t\t\treturn obj.onerror( request.status );\r\n\t\t\t\t\t}\r\n\t\t\t\t }\r\n\t\t\t\t};\r\n\t\t\t\trequest.onerror = function(){\r\n\t\t\t\t\tapp.filesLoaded[ file ] = \"\";\r\n\t\t\t\t\tloaded.push( \"unloaded:\"+file );\r\n\t\t\t\t\tunloaded.push( file );\r\n\t\t\t\t}\r\n\t\t\t\tif(cancelOnResend === true){\r\n\t\t\t\t\tlet idRequest = \"rq_\"+app.un(obj.id, app.random_string(4));\r\n\t\t\t\t\tlet rq = app.httpRequests[idRequest];\r\n\t\t\t\t\tif(typeof rq !== \"undefined\"){\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tapp.httpRequests[idRequest].abort();\r\n\t\t\t\t\t\t} catch(e){\r\n\t\t\t\t\t\t\tconsole.warn(\"unable to cancel request.\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tapp.httpRequests[idRequest] = request;\r\n\t\t\t\t}\t\t\t\r\n\t\t\t\tif(method !== \"GET\"){ \r\n\t\t\t\t\trequest.send( body );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\trequest.send();\r\n\t\t\t}\r\n\t\t\tapp.statusResources\t= \"loading\";\t\r\n\t\t\t( (files)=>{\r\n\t\t\t\tfiles.map(( file, key )=>{\r\n\t\t\t\t\tlet data = obj?.data ?? {};\r\n\t\t\t\t\tif(obj.multidata === true){\r\n\t\t\t\t\t\tdata = obj.data[key] ?? {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tobj.fetching( file, data );\r\n\t\t\t\t})\r\n\t\t\t\tvar counter = 0;\r\n\t\t\t\tlet check = setInterval(()=>{\r\n\t\t\t\t\tcounter = counter + 70;\r\n\t\t\t\t\tlet forceLoad = false;\r\n\t\t\t\t\tif(counter === 10000){\r\n\t\t\t\t\t\tforceLoad = true;\r\n\t\t\t\t\t\tconsole.warn(\"Â¡Impossible to load all files.\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(loaded.length === files.length || forceLoad === true){\r\n\t\t\t\t\t\tclearInterval(check);\r\n\t\t\t\t\t\tif(type === \"script\" || type === \"style\" || type === \"link\"){\r\n\t\t\t\t\t\t\tapp.inject(files, obj);\r\n\t\t\t\t\t\t\tobj.ready();\r\n\t\t\t\t\t\t}else if(type === \"text\"){\r\n\t\t\t\t\t\t\tvar texts = [];\r\n\t\t\t\t\t\t\tfor(var file of files){\r\n\t\t\t\t\t\t\t\ttexts.push(  app.filesLoaded[file].innerHTML );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tobj.ready( texts );\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tapp.statusResources\t= \"loaded\";\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 70)\r\n\t\t\t})(files);\r\n\t\t};\r\n\t\tthis.fetch = (props)=>{return this.models.fetch(props)}\r\n\t\tthis.include = (props)=>{return this.models.fetch(props)}\r\n\t\tthis.linkCSS = (props)=>{\r\n\t\t\tprops.type = \"link\";\r\n\t\t\tvar app = this;\t\r\n\t\t\tprops.type = \"style\";\r\n\t\t\tprops.url = props.url||[];\r\n\t\t\tprops.file = props.file || props.url;\r\n\t\t\tprops.files = props.files || props.file;\r\n\t\t\tprops.target = props.target || document.head;\r\n\t\t\tprops.process = props.process || function(el){ return el };\r\n\t\t\tprops.ready = props.ready || function(){};\r\n\t\t\tvar nodes = [];\r\n\t\t\tprops.files.map((file)=>{\r\n\t\t\t\tvar link = document.createElement(\"link\");\r\n\t\t\t\tlink.setAttribute(\"media\", \"all\");\r\n\t\t\t\tlink.setAttribute(\"rel\", \"stylesheet\");\r\n\t\t\t\tlink.href = file;\r\n\t\t\t\tlink = props.process(link);\r\n\t\t\t\t\r\n\t\t\t\tif(Array.isArray(props.target)){\r\n\t\t\t\t\tlet targets = props.target;\r\n\t\t\t\t\ttargets.map((target)=>{\r\n\t\t\t\t\t\tvar el = app.mount(target, link.cloneNode(true));\r\n\t\t\t\t\t\tnodes.push(el);\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar el = app.mount(props.target, link);\r\n\t\t\t\t\tnodes.push(el);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\tprops.ready(nodes);\r\n\t\t\treturn nodes;\r\n\t\t\t// return this.models.fetch(props)\r\n\t\t}\r\n\t\tthis.includeCSS = (props)=>{\t\t\r\n\t\t\tprops.type = \"style\";\r\n\t\t\treturn this.models.fetch(props)\r\n\t\t}\r\n\t\tthis.controller.views = {\r\n\t\t\tpath: (obj)=>{\r\n\t\t\t\tconst ext = this.ext; \r\n\t\t\t\tvar folder = `${this.folder}views/`;\r\n\t\t\t\tvar file_name = obj.views;\t\t\t\r\n\t\t\t\tvar resources = this.resources;\t\r\n\t\t\t\t// in case of route.\r\n\t\t\t\tvar routing = file_name.split(\"/\");\r\n\t\t\t\tvar Path = folder;\t\t\r\n\t\t\t\tif(routing.length === 1){\r\n\t\t\t\t\tvar file = routing[0];\r\n\t\t\t\t\tPath += `${file}${ext}`;\r\n\t\t\t\t\tresources[file] = {}; // create view instance.\r\n\t\t\t\t\treturn Path;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\t// file\r\n\t\t\t\t\tvar last = routing.pop();\r\n\t\t\t\t\t// last folder\r\n\t\t\t\t\tvar penultimate = routing.pop();\t\r\n\t\t\t\t\tvar LastFolder = penultimate;\r\n\t\t\t\t\tvar file = last;\r\n\t\t\t\t\tresources[LastFolder] = {}; // create view instance.\r\n\t\t\t\t\tresources[LastFolder][file] = {}; // create view instance.\r\n\t\t\t\t}\r\n\t\t\t\tif(routing.length === 0){\r\n\t\t\t\t\tPath += `${LastFolder}/${file}${ext}`;\r\n\t\t\t\t}else{\r\n\t\t\t\t\trouting.forEach(function(subfolder){\r\n\t\t\t\t\t\tPath += `${subfolder}/`\r\n\t\t\t\t\t});\r\n\t\t\t\t\tPath += `${LastFolder}/${file}${ext}`;\r\n\t\t\t\t}\r\n\t\t\t\treturn Path;\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.view.load = ( props )=>{\r\n\t\t\tprops = props||{};\r\n\t\t\tprops.ready = props.ready||function(){}; \r\n\t\t\tprops.folder = this.autoloader_folder||\"\";\r\n\t\t\tconst ext = this.ext;\t\t\t\r\n\t\t\tconst parameters = this.app.parameters;\t\t\r\n\t\t\tconst controller = this.app.controller_name;\r\n\t\t\tconst action = this.app.action_name;\r\n\t\t\tconst base = `${this.folder}${props.folder}${controller}`;\r\n\t\t\tprops.module = turpial.un(props.module, null);\r\n\t\t\tif(controller === \"index\"){\r\n\t\t\t\tvar urlPath =  `${base}${ext}`;\r\n\t\t\t}else if(parameters.length === 0 && controller !== \"index\" && typeof action === \"undefined\"){\r\n\t\t\t\tvar urlPath =  `${base}/index${ext}`;\r\n\t\t\t}else if(parameters.length === 0 && action !== \"undefined\"){\r\n\t\t\t\tvar urlPath =  `${base}/${action}/index${ext}`;\r\n\t\t\t}else {\t\t\t\t\r\n\t\t\t\tvar urlPath = `${base}/${action}`;\r\n\t\t\t\tparameters.forEach(function( parameter ){\r\n\t\t\t\t\turlPath += `/${parameter}`;\r\n\t\t\t\t})\r\n\t\t\t\turlPath += ext;\r\n\t\t\t}\t\r\n\t\t\tif(typeof props.module === \"string\"){\r\n\t\t\t\tprops.ext = props.ext || ext\r\n\t\t\t\turlPath = this.core_path+props.module+props.ext;\r\n\t\t\t}\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tfile: urlPath,\r\n\t\t\t\toptions: props.options || {},\r\n\t\t\t\tready: ()=>{ props.ready() },\r\n\t\t\t};\r\n\t\t\tif(typeof props.error === \"function\"){\r\n\t\t\t\tdata[\"error\"] = (data)=>{ props.error(data) };\r\n\t\t\t}\r\n\t\t\tthis.DataView = data;\r\n\t\t\tif(props.module === \"\"){ return; }\r\n\t\t\tif(props.module === false){ return; }\r\n\t\t\tthis.fetch( data );\t\t\t\r\n\t\t};\r\n\t\tthis.controller.routes = {\r\n\t\t\tgetHost: (props)=>{\r\n\t\t\t\tconst app = this;\r\n\t\t\t\tprops = props||{};\r\n\t\t\t\tif(props.loadModule === false || app.loadModulesOnRoute === false){\r\n\t\t\t\t\tprops.relativeModules = true;\r\n\t\t\t\t}\r\n\t\t\t\tvar href = Turpial.$WindowObject.location.href;\r\n\t\t\t\thref = href.split(\"#\");\r\n\t\t\t\thref = href[0];\r\n\t\t\t\thref = href.split(\"?\");\r\n\t\t\t\thref = href[0];\r\n\r\n\t\t\t\t/*if( app.searchStr(obj.path, \"http\") === true ){\r\n\t\t\t\t\thref = \"\";\r\n\t\t\t\t}*/\r\n\t\t\t\tlet relativeModules = app.un(props.relativeModules, false);\r\n\r\n\t\t\t\t// search for dynamic host.\r\n\t\t\t\tlet position = href.search(app.public_path);\r\n\t\t\t\tlet Host = href.slice(position, position+app.public_path.length);\r\n\t\t\t\tHost = href.split(Host)[0]+Host;\r\n\r\n\t\t\t\tvar slash = Host.slice(-1)\r\n\t\t\t\tif(slash !== \"/\"){slash = \"/\"}\r\n\t\t\t\telse{slash = \"\";}\r\n\t\t\t\tif(relativeModules == true){\r\n\t\t\t\t\treturn `${Host}${slash}`;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tslash = href.slice(-1)\r\n\t\t\t\t\tif(slash !== \"/\"){slash = \"/\"}\r\n\t\t\t\t\telse{slash = \"\";}\r\n\t\t\t\t\treturn `${href}${slash}`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// old output: `${href}${d}${obj.path}`\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tset: (props)=>{\r\n\t\t\t\tconst app = this;\r\n\t\t\t\tapp.app = {};\r\n\t\t\t\tprops = props||{};\r\n\r\n\t\t\t\tlet href = Turpial?.$WindowObject?.location?.href ?? \"\";\r\n\t\t\t\tlet Path = href.split(\"?\");\r\n\r\n\r\n\t\t\t\tPath = Path[0];\r\n\t\t\t\tPath = Path.split(\"#\");\r\n\t\t\t\tlet SearchPublichPath = Path[0].search(app.public_path);\r\n\t\t\t\tif(SearchPublichPath > 0){\r\n\t\t\t\t\tPath = Path[0].substr( SearchPublichPath + app.public_path.length )\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"bad_public_path_name\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet routes = Path.split(\"/\");\r\n\t\t\t\tlet n = 0;\r\n\t\t\t\tlet param = 0;\r\n\t\t\t\tapp.app.parameters = [];\t\t\t\r\n\t\t\t\troutes.forEach(function(route){\r\n\t\t\t\t\tif(route == \"\"){return;}\t\t\t\t\t\r\n\t\t\t\t\tif(n === 0){\r\n\t\t\t\t\t\tapp.app.controller_name = route;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(n === 1){\r\n\t\t\t\t\t\tapp.app.action_name = route;\r\n\t\t\t\t\t}else if(n > 1){\r\n\t\t\t\t\t\tapp.app.parameters[ param++ ] = route;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tn++;\r\n\t\t\t\t})\t\t\t\t\r\n\t\t\t\tapp.app.controller_name = app.app.controller_name||\"index\";\r\n\t\t\t\tapp.app.action_name = app.app.action_name||\"\";\r\n\r\n\t\t\t\tlet path = `${app.app.controller_name}/${app.app.action_name}/${app.app.parameters.join(\"/\")}`;\r\n\t\t\t\tpath = path.split(\"//\").join(\"/\");\r\n\t\t\t\tpath = path.split(\"///\").join(\"/\");\r\n\r\n\t\t\t\tapp.app.props = props;\r\n\r\n\t\t\t\tapp.app.path = path;\r\n\t\t\t\tapp.host = app.controller.routes.getHost();\r\n\r\n\t\t\t\tapp.app.host = app.host;\r\n\t\t\t},\r\n\t\t\tchange: ( obj )=>{\r\n\t\t\t\tconst app = this;\r\n\t\t\t\tconst type = obj.type||\"pushState\";\r\n\t\t\t\t\r\n\t\t\t\tobj.loadModule = app.un(obj.loadModule, true);\r\n\r\n\t\t\t\tlet output = `${app.controller.routes.getHost( obj )}${obj.path}`;\r\n\r\n\t\t\t\tif(output === Turpial.$WindowObject.location.href){ return; }\r\n\t\t\t\t\r\n\t\t\t\tTurpial.$WindowObject.history[type]( app.un( obj.object ),\r\n\t\t\t\t\t\t\t\t\t\t  \"\",\r\n\t\t\t\t\t\t\t\t\t\t  app.un( output ) );\t\r\n\t\t\t\tif(obj.loadModule === true && app.loadModulesOnRoute === true){\r\n\t\t\t\t\tapp.urls.load(obj);\r\n\t\t\t\t}\r\n\t\t\t\tlet title = app.un( obj.title, false );\r\n\t\t\t\tif(typeof title === \"string\"){\r\n\t\t\t\t\tdocument.title = title;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgo: (value)=>{\r\n\t\t\t\tif(typeof value === \"number\"){\r\n\t\t\t\t\tTurpial.$WindowObject.history.go(value)\r\n\t\t\t\t}else if(value === \"back\"){\r\n\t\t\t\t\tTurpial.$WindowObject.history.back();\r\n\t\t\t\t}else if(value === \"forward\"){\r\n\t\t\t\t\tTurpial.$WindowObject.history.forward();\r\n\t\t\t\t}else{return;}\r\n\t\t\t\tthis.controller.routes.set();\r\n\t\t\t\tthis.urls.load();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.router = (obj, ready)=>{\r\n\t\t\tready = ready||function(){};\r\n\t\t\tif(typeof obj === \"number\" || typeof obj === \"string\"){\r\n\t\t\t\tthis.controller.routes.go( obj );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.controller.routes.change( obj );\r\n\t\t\tthis.stateEvent();\r\n\t\t\tready();\r\n\t\t};\r\n\t\tthis.routes = this.controller.routes.set;\r\n\t\t\r\n\r\n\t\tsetTimeout(()=>{\r\n\t\t\tthis.routes(); // execute routes\t\r\n\t\t}, 0)\r\n\r\n\t\tthis.controller.components = {};\r\n\t\tthis.views.get = (obj)=>{\r\n\t\t\tif(typeof obj !== \"object\"){return;}\r\n\t\t\tif(typeof obj.views === \"string\"){\r\n\t\t\t\tobj.views = [ obj.views ];\r\n\t\t\t}\r\n\t\t\tvar Paths = [];\r\n\t\t\tvar controller = this.controller.views;\r\n\t\t\tobj.views.forEach(function(view, key){\r\n\t\t\t\tobj.views = view;\r\n\t\t\t\tPaths[key] = controller.path(obj);\r\n\t\t\t});\r\n\t\t\tObject.assign(obj, {file: Paths, ready: obj.ready});\r\n\t\t\tthis.fetch(obj);\r\n\t\t}\r\n\t\tthis.urls = {};\r\n\t\tthis.urls.load = (obj)=>{\r\n\t\t\tobj = obj || {};\r\n\t\t\tconst app = this;\r\n\t\t\tconst controller = app.app.controller_name;\r\n\t\t\tconst action = app.app.action_name;\r\n\t\t\tconst parameters = app.app.parameters;\r\n\t\t\t// if this is undefined set as empty...\r\n\t\t\tlet moduleController = app.urls[controller] || false;\r\n\t\t\tobj.module = turpial.un(obj.module, null);\r\n\r\n\r\n\t\t\t// when @turpial.router method is used and \r\n\t\t\t// load a custom JS module/component file.\r\n\t\t\tif(typeof obj.module === \"string\"){app.view.load(obj); return;} \r\n\r\n\t\t\t// when url is root or there isn't modules\r\n\t\t\tif(moduleController === false){app.view.load(obj); return;} \r\n\r\n\t\t\tlet loadController = app.un(moduleController.loadController, true);\r\n\t\t\tlet loadAction = app.un(moduleController.loadAction, true);\r\n\t\t\tlet loadParameters = app.un(moduleController.loadParameters, 1000);\r\n\t\t\tlet moduleAction = app.un(app.urls[controller][action], false);\r\n\r\n\t\t\tif(typeof moduleController.self === \"function\"){\r\n\t\t\t\tif(typeof moduleAction === \"function\" && loadAction === true){\r\n\t\t\t\t\tif(parameters.length > loadParameters){\r\n\t\t\t\t\t\tmoduleController.self( ()=>{ moduleAction( ()=>{} ); } )\r\n\t\t\t\t\t\treturn; \r\n\t\t\t\t\t}\r\n\t\t\t\t\tmoduleController.self( ()=>{ moduleAction( ()=>{app.view.load(obj);} ); } )\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else if(loadAction === false && typeof action === \"string\"){\r\n\t\t\t\t\tmoduleController.self( ()=>{ moduleAction( ()=>{} ); } );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmoduleController.self(()=>{app.view.load(obj);})\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.historyEvents = {};\r\n\t\tthis.URLNoHASH = function(url){\r\n\t\t\treturn url.split(\"#\")[0];\r\n\t\t}\r\n\t\tthis.createHistoryEvent = function(position, callback){\r\n\t\t\tvar main = this.URLNoHASH(Turpial?.$WindowObject?.location?.href ?? \"\");\r\n\t\t\tposition = position || \"\";\r\n\t\t\tposition = main+position;\r\n\t\t\tthis.historyEvents[position] = callback;\r\n\t\t\t/* @HOW TO USE HISTORY VIEWS.\r\n\t\t\t * you need to create new history events for actual position history\r\n\t\t\t * you can rename index position to trigger a function when back history\r\n\t\t\t * action was executed.\r\n\t\t\t * \r\n\t\t\t * ex: you can create history events like: \r\n\t\t\t * @index-> localhost/myweb\r\n\t\t\t * when you create an application that generate a different view\r\n\t\t\t * and generating new html elements and change history wirh router.\r\n\t\t\t * you can add it to history event views to generate \r\n\t\t\t * a callback function when history has that location path.\r\n\t\t\t *\r\n\t\t\t * You need to set @allowStateEvents to true to trigger this turpial function.\r\n\t\t\t * \r\n\t\t\t * note: turpial will trigger index or main view in the position you have\r\n\t\t\t * for example if the page load at: myweb.com/portfolio/\r\n\t\t\t * that point will be considered like a main position view.\r\n\t\t\t * @you can rename index if you left empty url position\r\n\t\t\t *  value on createHistoryEvent method.\r\n\t\t\t * @you can create another view like myweb.com/portfolio/client-1 naming\r\n\t\t\t *  position url like \"/client-1\"\r\n\t\t\t *  note the \"/\" sign at the beginning\r\n\t\t\t * @set the function to be executed on callback in second value property.\r\n\t\t\t*/\r\n\t\t}\r\n\t\tthis.createHistoryEvent(\"\", function(){});\r\n\t\tthis.stateEvent = () =>{\r\n\t\t\tvar event = this.historyEvents;\r\n\t\t\tif(typeof event[this.URLNoHASH(Turpial.$WindowObject.location.href)] === \"function\"){\r\n\t\t\t\tevent[this.URLNoHASH(Turpial.$WindowObject.location.href)]();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(this.allowStateEvents === true){\r\n\t\t\tTurpial.$WindowObject.addEventListener(\"popstate\", this.stateEvent);\r\n\t\t}\t\t\r\n\t\tif(tpObj.autoloader === true){\r\n\r\n\t\t\tTurpial.$WindowObject.addEventListener(\"load\", ()=>{\t\t\t\t\r\n\t\t\t\tthis.urls.load();\r\n\t\t\t})\r\n\t\t\tTurpial.$WindowObject.onpopstate = (event)=>{\r\n\t\t\t\t// on window history change\r\n\t\t\t\t// update routes and reload modules. \r\n\t\t\t  this.controller.routes.set(); // execute routes\r\n\t\t\t  this.urls.load();\r\n\t\t\t  (function(){\r\n\t\t\t  \t// just for older browsers\r\n\t\t\t  \tif(typeof window.customElements === \"undefined\"){\r\n\t\t\t  \t\tArray.prototype.slice.call( this.myComponents )\r\n\t\t\t  \t\t\t.forEach(function(com){\r\n\t\t\t  \t\t\t\tthis.component.set({\r\n\t\t\t  \t\t\t\t\ttag: com.tag,\r\n\t\t\t  \t\t\t\t\tprops: com.props,\r\n\t\t\t  \t\t\t\t})\r\n\t\t\t  \t\t\t})\r\n\t\t\t  \t}\r\n\t\t\t  })();\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tthis.template = (html, replacemets)=>{\r\n\t\t\tconst engine = {\r\n\t\t\t\trun: function( html, replacemets ){\r\n\t\t\t\t\treplacemets = replacemets||[];\r\n\t\t\t\t\tif(typeof replacemets === \"object\" && !Array.isArray(replacemets)){\r\n\t\t\t\t\t\tvar reArrange = [];\r\n\t\t\t\t\t\tObject.values(replacemets).map(( element, number )=>{\r\n\t\t\t\t\t\t    reArrange.push({[Object.keys(replacemets)[number]]: element})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treplacemets = reArrange;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(typeof html === \"object\"){ html = html.innerHTML }\r\n\t\t\t\t\tvar template = function(template, searchall, replaceby){\r\n\t\t\t\t\t\treturn template.split(searchall).join(replaceby);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar structure = html;\t\t\r\n\t\t\t\t\treplacemets.forEach(function( replacement ){\r\n\t\t\t\t\t\tvar items = Object.keys(replacement);\r\n\t\t\t\t\t\tvar values = Object.values(replacement);\r\n\t\t\t\t\t\titems.forEach(function( item, key ){\t\t\t\t\t\t\r\n\t\t\t\t\t\t\titem = `{{ ${item} }}`;\r\n\t\t\t\t\t\t\tif(html.search(item) >= 0){\r\n\t\t\t\t\t\t\t\tstructure = template(structure, item, values[key]);\r\n\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn structure;\r\n\t\t\t\t},\r\n\t\t\t\treplace: function( item, replacement, HTML ){\r\n\t\t\t\t\titem = `{{ ${item} }}`;\r\n\t\t\t\t\tHTML = HTML.split(item).join(replacement);\r\n\t\t\t\t\treturn HTML;\r\n\t\t\t\t},\r\n\t\t\t\tjoinMoreElements: function(target, elements){\r\n\t\t\t\t\tObject.values(elements).forEach(function(element, key){\t\t\t\t\t\r\n\t\t\t\t\t\ttarget[Object.keys(elements)[key]] = element;\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn target;\r\n\t\t\t\t},\r\n\t\t\t\ttoHTML: function( target, strings ){\r\n\t\t\t\t\tif(target !== false){\r\n\t\t\t\t\t\ttarget.innerHTML = strings;\r\n\t\t\t\t\t\ttarget = target.content.firstElementChild;\t\t\r\n\t\t\t\t\t\treturn target;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tturpial.render()\r\n\t\t\t\t\t}\t\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\ttoString: function( target, html ){\r\n\t\t\t\t\thtml = html.cloneNode(true);\r\n\t\t\t\t\tvar dom_elem = target;\r\n\t\t\t\t\tdom_elem.innerHTML = \"<div></div>\";\r\n\t\t\t\t\tdom_elem = dom_elem.content.firstElementChild;\r\n\t\t\t\t\tdom_elem.appendChild(html);\r\n\t\t\t\t\treturn dom_elem.innerHTML;\r\n\t\t\t\t},\r\n\t\t\t\tcreate: function( element, replacements ){\r\n\t\t\t\t\tvar app = this;\r\n\t\t\t\t\t// start with \"div\" after template tag.\t\t\r\n\t\t\t\t\tvar content = turpial.find(element).content.firstElementChild;\r\n\t\t\t\t\t// this is to fill it, after finish the process.\r\n\t\t\t\t\tvar container = content.cloneNode( true );\r\n\t\t\t\t\tvar getHTMLText = content.innerHTML;\r\n\t\t\t\t\tvar eraseEls = [];\t\t\r\n\t\t\t\t\tObject.keys(replacements).forEach(function( item, key ){\r\n\t\t\t\t\t\tgetHTMLText = app.replace(item, Object.values(replacements)[key], getHTMLText);\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// PUSH INTO THE CLONDED\r\n\t\t\t\t\tcontainer.innerHTML = getHTMLText;\r\n\t\t\t\t\treturn container;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn engine.run(html, replacemets);\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * \r\n\t * @returns {URLSearchParams}\r\n\t */\r\n\turl_params()\r\n\t{\r\n\t\tlet search = window.location.search;\r\n\t\tconst urlParams = new URLSearchParams(search);\r\n\t\treturn urlParams;\r\n\t}\r\n\tmap(appName, nodes = [])\r\n\t{\r\n\t\tvar app = this;\t\r\n\t\tvar map = app.birds[appName];\r\n\t\tif(typeof appName === \"object\"){\r\n\t\t\tmap = appName;\r\n\t\t}else if(typeof map === \"undefined\"){\r\n\t\t\tmap = this.find( appName )\r\n\t\t}\r\n\r\n\t\tif(typeof nodes === \"object\")\r\n\t\t{\r\n\t\t\tif(typeof nodes[0] === \"undefined\"){return map;}\r\n\t\t\tmap = map.children;\r\n\t\t\tnodes.forEach(function( node, key ){\r\n\t\t\t\tif( typeof nodes[key+1] === \"undefined\" ){\r\n\t\t\t\t\tmap = map[node];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmap = map[node].children;\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn map;\t\t\r\n\t}\r\n\tcreateMap(app)\r\n\t{\r\n\t\tapp = this.find( app );\r\n\t\tvar turpial_app_id = app.getAttribute(\"id\");\r\n\t\tif(typeof turpial_app_id !== \"undefined\"){\r\n\t\t\tvar realDOMElement = document.getElementById(turpial_app_id);\r\n\t\t\tthis.birds[turpial_app_id] = realDOMElement;\r\n\t\t}\r\n\t}\r\n\tread(appName, nodes = [])\r\n\t{\r\n\t\treturn this.map(appName, nodes);\r\n\t}\r\n\tselectorApp(appName, selector = [])\r\n\t{\r\n\t\tif(typeof selector === \"object\"){\r\n\t\t\t// searching via map.\r\n\t\t\tif(Number.isInteger(selector[0]) === true){\r\n\t\t\t\treturn this.map(appName, selector);\r\n\t\t\t}else{\r\n\t\t\t\treturn selector;\r\n\t\t\t}\t\t\t\r\n\t\t}else{return selector;}\r\n\t}\r\n\tdelete( selector )\r\n\t{\r\n\t\tselector = this.find( selector );\r\n\t\tselector.remove();\r\n\t}\r\n\tupdate(selector, insert = null, where = 'replace-selector', justUpdate = true)\r\n\t{\r\n\t\tif(typeof insert === \"string\"){\r\n\t\t\tvar content = this.render( insert );\r\n\t\t\tvar string = insert;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvar content = insert;\r\n\t\t}\r\n\t\tif(content === null){\r\n\r\n\t\t\tvar isHTML = false;\t\t\r\n\t\t\tvar content = insert;\r\n\t\t}else{\r\n\t\t\tvar isHTML = true;\r\n\t\t}\r\n\t\t// get the child to insert a new element before or after\r\n\t\tvar child = selector;\r\n\t\tif(justUpdate === true){ // if the the call is for update\r\n\t\t\twhere = 'replace-selector';\r\n\t\t}\r\n\t\t// get his parent\r\n\t\tvar output = false;\r\n\t\tvar parent = child.parentNode;\r\n\t\tif(where === \"before\"){\r\n\t\t\tparent.insertBefore(content, child);\r\n\t\t\toutput = content;\r\n\t\t}else if(where === \"after\"){\r\n\t\t\t// emulating with next sibling.\r\n\t\t\tparent.insertBefore(content, child.nextSibling);\r\n\t\t\toutput = content;\r\n\t\t}else if(where === \"replace-selector\"){\r\n\t\t\t// insertar nuevo elemento y eliminar viejo...\r\n\t\t\tparent.replaceChild(content, child);\r\n\t\t\toutput = content;\r\n\t\t}else if(where === \"inner\"){\r\n\t\t\tif(isHTML === true){\r\n\t\t\t\t// editar el child\r\n\t\t\t\tchild.innerHTML = string;\r\n\t\t\t}else{\r\n\t\t\t\tchild.innerText = content;\r\n\t\t\t}\r\n\t\t\toutput = child;\r\n\t\t}\r\n\t\telse{console.warn(\"error-on-placement\");return false;}\t\r\n\t\tlet mapping = child;\r\n\t\tthis.createMap( mapping );\r\n\t\treturn output;\r\n\t}\r\n\tinsert(selector, content, where = \"inner\")\r\n\t{\r\n\t\tselector = this.find( selector );\r\n\t\treturn this.update(selector, content, where, false);\r\n\t}\r\n\trender(LiteralsString)\r\n\t{\r\n\t\tvar dom_elem = document.createElement(\"template\");\r\n\t\tdom_elem.innerHTML = LiteralsString;\r\n\t\tdom_elem = dom_elem.content.firstElementChild;\t\t\r\n\t\treturn dom_elem;\r\n\t}\r\n\tmount(place, things)\r\n\t{\r\n\t\tif(typeof things === \"string\"){\r\n\t\t\tvar things = this.render( things );\r\n\t\t}if(things === null){console.warn(\"need to be HTML string or object\");return;}\r\n\t\tplace = this.find( place );\r\n\t\tlet target = null;\r\n\t\tif(place === document){\r\n\t\t\tplace = document.body;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\ttarget = place.appendChild(things);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(error);\r\n\t\t\tconsole.log(place);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet app = place;\r\n\t\tthis.createMap( app );\r\n\t\treturn target;\r\n\t}\r\n\tsettings(attrs)\r\n\t{\r\n\t\tif(typeof attrs[0] !== \"undefined\"){return;}\r\n\t\tvar setAttrsValues = [];\r\n\t\tvar i = 0;\r\n\r\n\t\tvar Values = [];\r\n\t\tfor(var value in attrs){\r\n\t\t\tValues.push( attrs[value] );\r\n\t\t}\r\n\t\tValues.forEach(function(value){\r\n\t\t\tsetAttrsValues[i++] = value;\r\n\t\t});\r\n\r\n\t\tvar setAttrsNames = [];\r\n\t\tvar i = 0;\r\n\t\tObject.keys(attrs).forEach(function(name){\r\n\t\t\tsetAttrsNames[i++] = name;\r\n\t\t});\r\n\r\n\t\tvar pushAttrs = \"\";\r\n\t\t\tvar i = 0;\r\n\t\t\tsetAttrsNames.forEach(function(item, key){\r\n\t\t\t\tpushAttrs += ` ${item}=\"${setAttrsValues[key]}\"`;\r\n\t\t\t});\r\n\t\treturn pushAttrs;\r\n\t}\r\n\tcreateTag(el, attrs = \"\", content = \"\")\r\n\t{\r\n\t\tif(typeof attrs === \"object\"){\r\n\t\t\tattrs = this.settings(attrs);\r\n\t\t}\r\n\t\tlet tag  = `<${el}${attrs}>`;\r\n\t\ttag += content;\r\n\t\tif(el !== \"br\"){\r\n\t\t\ttag += `</${el}>`;\r\n\t\t}\t\t\r\n\t\treturn tag;\r\n\t}\r\n\thtml(el, attrs, content)\r\n\t{\r\n\t\tconst replacement = this.replacement;\r\n\t\tconst app = this;\t\r\n\t\tif(el === \"code\"){\r\n\t\t\tcontent = replacement(content, \"<\", \"&lt;\");\r\n\t\t\tcontent = replacement(content, \">\", \"&gt;\");\r\n\t\t\tcontent = replacement(content, \" \", \"&nbsp;\");\r\n\t\t}\t\t\t\r\n\t\tif (typeof content === \"undefined\"){\r\n\t\t\t// si no existen atributos\r\n\t\t\t// y existe contenido el esquema puede ser asÃ­\r\n\t\t\t// el($tag, $contenido)\r\n\t\t\t// por lo que el contenido ahora es igual al campo atributos.\r\n\t\t\tvar content = attrs;\r\n\t\t\tvar attrs = \"\";\r\n\t\t}\r\n\t\tif(typeof content === \"object\" && typeof content[0] !== \"undefined\"){\r\n\r\n\t\t\tvar elements = \"\";\r\n\t\t\tvar i = 0;\r\n\t\t\tcontent.forEach(function(item, key){\r\n\t\t\t\telements += `${item}`;\r\n\t\t\t});\r\n\t\t\tvar html = app.createTag(el, attrs, elements);\r\n\t\t}else if(typeof content === \"object\"){\r\n\t\t\t// si llega a este punto y sigue siendo\r\n\t\t\t// un objeto quiere decir que el segundo \r\n\t\t\t// argumento es un objeto con class id etc.\r\n\t\t\t// se puede estar intentando crear un elemento vacÃ­o.\r\n\t\t\t// por lo tanto content serÃ¡ igual a nada\r\n\t\t\tvar attrs = content;\r\n\t\t\tvar html = app.createTag(el, attrs, content = \"\");\t\t\t\r\n\t\t}else{\r\n\t\t\tvar html = app.createTag(el, attrs, content);\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n\tel(el, attrs, content)\r\n\t{\r\n\t\treturn this.html(el, attrs, content);\r\n\t}\r\n}\r\n\r\nclass $WindowObject \r\n{\r\n\tstatic data = Turpial.$WindowObject;\r\n}\r\n\r\nclass $DocumentObject \r\n{\r\n\tstatic data = Turpial.$DocumentObject;\r\n}\r\n\r\nlet turpial = new Turpial({\r\n\tpublic_path: Turpial.$WindowObject?.location_host ?? Turpial.$WindowObject?.location?.host ?? null,\r\n\tloadModulesOnRoute: false,\r\n});\r\n\r\nfunction init_turpial(){\r\n\tturpial = new Turpial({\r\n\t\tpublic_path: Turpial.$WindowObject?.location_host ?? Turpial.$WindowObject?.location?.host ?? null,\r\n\t\tloadModulesOnRoute: false,\r\n\t});\r\n}\r\n\r\nexport {turpial, Turpial, $WindowObject, $DocumentObject, init_turpial}","import _isPlaceholder from \"./_isPlaceholder.js\";\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\n\nexport default function _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0 || _isPlaceholder(a)) {\n      return f1;\n    } else {\n      return fn.apply(this, arguments);\n    }\n  };\n}","export default function _isPlaceholder(a) {\n  return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;\n}","import _curry1 from \"./internal/_curry1.js\";\n/**\n * Gives a single-word string description of the (native) type of a value,\n * returning such answers as 'Object', 'Number', 'Array', or 'Null'. Does not\n * attempt to distinguish user Object types any further, reporting them all as\n * 'Object'.\n *\n * @func\n * @memberOf R\n * @since v0.8.0\n * @category Type\n * @sig * -> String\n * @param {*} val The value to test\n * @return {String}\n * @example\n *\n *      R.type({}); //=> \"Object\"\n *      R.type(1); //=> \"Number\"\n *      R.type(false); //=> \"Boolean\"\n *      R.type('s'); //=> \"String\"\n *      R.type(null); //=> \"Null\"\n *      R.type([]); //=> \"Array\"\n *      R.type(/[A-z]/); //=> \"RegExp\"\n *      R.type(() => {}); //=> \"Function\"\n *      R.type(async () => {}); //=> \"AsyncFunction\"\n *      R.type(undefined); //=> \"Undefined\"\n */\n\nvar type =\n/*#__PURE__*/\n_curry1(function type(val) {\n  return val === null ? 'Null' : val === undefined ? 'Undefined' : Object.prototype.toString.call(val).slice(8, -1);\n});\n\nexport default type;","import _cloneRegExp from \"./_cloneRegExp.js\";\nimport type from \"../type.js\";\n/**\n * Copies an object.\n *\n * @private\n * @param {*} value The value to be copied\n * @param {Boolean} deep Whether or not to perform deep cloning.\n * @return {*} The copied value.\n */\n\nexport default function _clone(value, deep, map) {\n  map || (map = new _ObjectMap()); // this avoids the slower switch with a quick if decision removing some milliseconds in each run.\n\n  if (_isPrimitive(value)) {\n    return value;\n  }\n\n  var copy = function copy(copiedValue) {\n    // Check for circular and same references on the object graph and return its corresponding clone.\n    var cachedCopy = map.get(value);\n\n    if (cachedCopy) {\n      return cachedCopy;\n    }\n\n    map.set(value, copiedValue);\n\n    for (var key in value) {\n      if (Object.prototype.hasOwnProperty.call(value, key)) {\n        copiedValue[key] = deep ? _clone(value[key], true, map) : value[key];\n      }\n    }\n\n    return copiedValue;\n  };\n\n  switch (type(value)) {\n    case 'Object':\n      return copy(Object.create(Object.getPrototypeOf(value)));\n\n    case 'Array':\n      return copy([]);\n\n    case 'Date':\n      return new Date(value.valueOf());\n\n    case 'RegExp':\n      return _cloneRegExp(value);\n\n    case 'Int8Array':\n    case 'Uint8Array':\n    case 'Uint8ClampedArray':\n    case 'Int16Array':\n    case 'Uint16Array':\n    case 'Int32Array':\n    case 'Uint32Array':\n    case 'Float32Array':\n    case 'Float64Array':\n    case 'BigInt64Array':\n    case 'BigUint64Array':\n      return value.slice();\n\n    default:\n      return value;\n  }\n}\n\nfunction _isPrimitive(param) {\n  var type = typeof param;\n  return param == null || type != 'object' && type != 'function';\n}\n\nvar _ObjectMap =\n/*#__PURE__*/\nfunction () {\n  function _ObjectMap() {\n    this.map = {};\n    this.length = 0;\n  }\n\n  _ObjectMap.prototype.set = function (key, value) {\n    const hashedKey = this.hash(key);\n    let bucket = this.map[hashedKey];\n\n    if (!bucket) {\n      this.map[hashedKey] = bucket = [];\n    }\n\n    bucket.push([key, value]);\n    this.length += 1;\n  };\n\n  _ObjectMap.prototype.hash = function (key) {\n    let hashedKey = [];\n\n    for (var value in key) {\n      hashedKey.push(Object.prototype.toString.call(key[value]));\n    }\n\n    return hashedKey.join();\n  };\n\n  _ObjectMap.prototype.get = function (key) {\n    /**\n     * depending on the number of objects to be cloned is faster to just iterate over the items in the map just because the hash function is so costly,\n     * on my tests this number is 180, anything above that using the hash function is faster.\n     */\n    if (this.length <= 180) {\n      for (const p in this.map) {\n        const bucket = this.map[p];\n\n        for (let i = 0; i < bucket.length; i += 1) {\n          const element = bucket[i];\n\n          if (element[0] === key) {\n            return element[1];\n          }\n        }\n      }\n\n      return;\n    }\n\n    const hashedKey = this.hash(key);\n    const bucket = this.map[hashedKey];\n\n    if (!bucket) {\n      return;\n    }\n\n    for (let i = 0; i < bucket.length; i += 1) {\n      const element = bucket[i];\n\n      if (element[0] === key) {\n        return element[1];\n      }\n    }\n  };\n\n  return _ObjectMap;\n}();","export default function _cloneRegExp(pattern) {\n  return new RegExp(pattern.source, pattern.flags ? pattern.flags : (pattern.global ? 'g' : '') + (pattern.ignoreCase ? 'i' : '') + (pattern.multiline ? 'm' : '') + (pattern.sticky ? 'y' : '') + (pattern.unicode ? 'u' : '') + (pattern.dotAll ? 's' : ''));\n}","import _clone from \"./internal/_clone.js\";\nimport _curry1 from \"./internal/_curry1.js\";\n/**\n * Creates a deep copy of the source that can be used in place of the source\n * object without retaining any references to it.\n * The source object may contain (nested) `Array`s and `Object`s,\n * `Number`s, `String`s, `Boolean`s and `Date`s.\n * `Function`s are assigned by reference rather than copied.\n *\n * Dispatches to a `clone` method if present.\n *\n * Note that if the source object has multiple nodes that share a reference,\n * the returned object will have the same structure, but the references will\n * be pointed to the location within the cloned value.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig {*} -> {*}\n * @param {*} value The object or array to clone\n * @return {*} A deeply cloned copy of `val`\n * @example\n *\n *      const objects = [{}, {}, {}];\n *      const objectsClone = R.clone(objects);\n *      objects === objectsClone; //=> false\n *      objects[0] === objectsClone[0]; //=> false\n */\n\nvar clone =\n/*#__PURE__*/\n_curry1(function clone(value) {\n  return value != null && typeof value.clone === 'function' ? value.clone() : _clone(value, true);\n});\n\nexport default clone;","\r\nimport { writable } from 'svelte/store';\r\nimport { RouterStore } from '../RouterStore';\r\nimport { UserInterface } from '../models/UserInterfaces';\r\nimport { SubscriptionsInterface } from '../models/SubscriptionInterface';\r\nimport { turpial, Turpial } from './turpial';\r\nimport * as Ramda from 'ramda';\r\n\r\n\r\nconst turnstile_pk = Turpial.$WindowObject?.IS_ONLINE ? \"0x4AAAAAAAz1-qtOEEVsM45z\" : \"0x4AAAAAAALZr-x-tz7KsQDe\";\r\n\r\nfunction appData() {\r\n\r\n    let application_data = {\r\n        main_components_loaded: false,\r\n        is_online: false,\r\n\r\n        /**\r\n         * lleva a la ruta /\r\n        */\r\n        host: \"\",\r\n\r\n        /**\r\n         * lleva a la ruta /api/v1/services\r\n        */\r\n        api_host: \"\",\r\n\r\n        /**\r\n         * lleva a la ruta /\r\n        */\r\n        api_host_base: \"\",\r\n\r\n        /**\r\n         * host for stream.3pod.io/api/v1/services/\r\n         */\r\n        api_stream: \"\",\r\n\r\n        /**\r\n         * host for stream.3pod.io/\r\n         */\r\n        api_stream_base: \"\",\r\n\r\n        /**\r\n         * current version for user\r\n         */\r\n        version_user: null, // 1.2, presentation, 2.0,\r\n\r\n        /**\r\n         * lleva a la ruta default/public/assets/\r\n         */\r\n        assets_path: \"\",\r\n        enviroment: \"\", //[\"localhost\",\"dev\",\"production\"]\r\n        authenticate: \"\", \r\n        website_title: \"\",\r\n        is_testing_user: null,\r\n        plan_limits_testing: \"\",\r\n        go_to_plans: \"#\",\r\n        projects: [],\r\n        path: \"/\",\r\n        stripeTokens: { \r\n            live: \"pk_live_ZodCkKBak1MPlwBJsxsMuubx\",\r\n            test: \"pk_test_X7AvKFxbFhE5jaMPKPqiAbql003mxvgpKe\",\r\n        },\r\n        stripeTokens_v2: { \r\n            live: \"pk_live_51OEXyaGqoorrE7eC4Qtor2u3YWGCqZkxiPGBk9NZf7QMWCy0KBZlohfpoHaKYkWEiZMYFGWbtlP9kLSt6LRsuEPE00vwPdGIjS\",\r\n            test: \"pk_test_51OEXyaGqoorrE7eCLdOu0IfVLrKTAyUZeFunq7vgyE84beauILQ1yYT1QCB2otAx3nJioglxBPsR60x4rqZP7rCB00J9IP9O7v\",\r\n\r\n            // RE-DEFINE TO USE stripeTokens from V1 for some days.\r\n            //live: \"pk_live_ZodCkKBak1MPlwBJsxsMuubx\",\r\n            //test: \"pk_test_X7AvKFxbFhE5jaMPKPqiAbql003mxvgpKe\",\r\n        },\r\n        stripe_key: null, // use this for StripeCard\r\n        \r\n        /**\r\n         * @type {UserInterface}\r\n         */\r\n        user: null,\r\n        admin: null,\r\n        superuser: null,\r\n        host: null,\r\n        loaded_turnstile: false,\r\n        turnstile_token: null,\r\n        show_onboarding: false,\r\n        on_error_session_redirect: {\r\n            user: null,\r\n            admin: null,\r\n            superuser: null,\r\n        }\r\n\t}\r\n\r\n\tconst { subscribe, update } = writable(application_data);\r\n\t//window.ApplicationData = application_data;\r\n\tconst dataApp = {\r\n        subscribe: subscribe,\r\n        create_turnstile_instance: function(selector, callback, props = {}){\r\n            selector = selector || \"#turnstile-element\";\r\n            callback = callback || function(){};\r\n            let turnstile_id = turnstile.render(selector, {\r\n                sitekey: turnstile_pk,\r\n                //retry: props.retry ?? \"auto\",\r\n                callback: function(turnstile_token) {\r\n                    update((data)=>{\r\n                        data.turnstile_token = turnstile_token;\r\n                        return data;\r\n                    })\r\n                    callback();\r\n                    setTimeout(()=> turnstile.remove(turnstile_id), 2000);\r\n                },\r\n            });\r\n        },\r\n        verify_user_version: () => {\r\n            update((data) => {\r\n                let metadata_3pod_2_0 = data?.user?.metadata[\"3pod_2_0\"] ?? null;\r\n                let version_to_show = metadata_3pod_2_0 ? \"2.0\" : \"1.2\";\r\n                let more_tags = (data?.user?.more_tags ?? null);\r\n                let is_show_v2_admin = false;\r\n                \r\n                if(more_tags !== null && typeof more_tags === \"string\"){\r\n                    more_tags = more_tags.split(\",\");\r\n                    is_show_v2_admin = more_tags?.some(tag => tag === \"show_v2_admin\");\r\n                }\r\n\r\n                if(data?.version_user === null && metadata_3pod_2_0 === null) {\r\n                    let subscription_funnel = null;\r\n                    let subscription_suite = null;\r\n\r\n                    data?.user?.subscriptions?.forEach((sub)=>{\r\n                        if(sub.membership_type === \"funnels\"){\r\n                            subscription_funnel = sub;\r\n                        }\r\n                        if(sub?.membership_type === \"suite\" || sub?.membership_type === \"suite_website\") {\r\n                            subscription_suite = sub;\r\n                        }\r\n                    });\r\n                    version_to_show = subscription_funnel === null ? \"2.0\" : \"1.2\";              \r\n                    data.version_user = version_to_show;\r\n\r\n                    if(subscription_suite) {\r\n                        data.version_user = \"2.0\";\r\n                    }\r\n                    return data;\r\n                }\r\n\r\n                if(data?.version_user === null) {\r\n                    data.version_user = version_to_show;\r\n                    return data;\r\n                }\r\n\r\n                if(is_show_v2_admin && (typeof Cookies.get(\"AppSessionSuperUser\") === \"string\" || typeof Cookies.get(\"AppSessionAdmin\") === \"string\")) {\r\n                    data.version_user = \"2.0\";\r\n                }\r\n                return data;\r\n            });\r\n        },\r\n        is_testing: function(only_tag = false, tag_testing = \"testing3pod\")\r\n        {\r\n            if(application_data.is_testing_user === true){\r\n                return true;\r\n            }\r\n\r\n            let user = application_data?.user ?? {};\r\n            let tags = [];\r\n            \r\n            if(user?.user_from_campaign !== null){\r\n                tags.push(user?.user_from_campaign ?? \"\");\r\n            }\r\n\r\n            if(typeof user?.more_tags === \"string\"){\r\n                user.more_tags = user.more_tags.split(\",\");\r\n            }\r\n\r\n            if(Array.isArray(user?.more_tags)){\r\n                user.more_tags.forEach((tag)=>{\r\n                    tags.push(tag)\r\n                })\r\n            }\r\n\r\n            tags.forEach((tag)=>{\r\n                if(Array.isArray(tag_testing)){\r\n                    tag_testing.forEach((tag_test)=>{\r\n                        if(tag === tag_test || tag === \"testing3pod\"){\r\n                            application_data.is_testing_user = true;\r\n                        }\r\n                    })\r\n                }else{\r\n                    if((tag_testing === tag) || (tag === \"show_v2_admin\")){\r\n                        application_data.is_testing_user = true;\r\n                    }\r\n                    if((tag === \"show_v2_admin\") && (typeof Cookies.get(\"AppSessionSuperUser\") === \"string\" || typeof Cookies.get(\"AppSessionAdmin\") === \"string\")) {\r\n                        application_data.is_testing_user = true;\r\n                    }\r\n                }                \r\n            })\r\n\r\n            \r\n\r\n            if(only_tag === true){\r\n                return application_data.is_testing_user === true;\r\n            }\r\n\r\n            return window.IS_ONLINE === false || application_data.is_testing_user === true;\r\n        },\r\n        /**\r\n         * Get Certain Membership.\r\n         * @param {String} membership_type \r\n         * @param {UserInterface} user \r\n         * @returns \r\n         */\r\n        get_subscription: function(membership_type, user = null){\r\n            user = user ?? application_data?.user ?? {};\r\n            if(user == null){\r\n                user = window.user ?? window.user2\r\n            }\r\n            let subscriptions = user?.subscriptions ?? [];\r\n            let subscription = subscriptions.find(function(subscription){\r\n                return subscription.membership_type === membership_type;\r\n            }) ?? null;\r\n\r\n            return subscription;\r\n        },\r\n        /**\r\n         * \r\n         * @param {UserInterface} User \r\n         * @param {String} membership_type \r\n         * @returns Object\r\n         */\r\n        get_subscription_status: function(User, membership_type, subrequest = false){\r\n            const app = this;\r\n\r\n            if(User == null){\r\n                User = window.user ?? window.user2\r\n            }\r\n\r\n\r\n            /**\r\n             * @type {SubscriptionsInterface}\r\n             */\r\n            let subscription = {};\r\n\r\n             /**\r\n             * @type {SubscriptionsInterface|null}\r\n             */\r\n             let subscription_website = null;\r\n\r\n            /**\r\n             * @type {Array.<SubscriptionsInterface>}\r\n             */\r\n            let subscriptions = User?.subscriptions ?? [];\r\n\r\n            let total_webpages = User?.current_total_webpages ?? 0;\r\n            let total_funnels = User?.current_total_funnels ?? 0;\r\n\r\n            // websites or sites including funnels and webpages\r\n            let total_websites = User?.current_total_websites ?? 0;\r\n\r\n            subscription = subscriptions.find((item) => {\r\n                return item.membership_type === membership_type;\r\n            })\r\n\r\n            /**\r\n             * @type {SubscriptionsInterface}\r\n             */\r\n            let subscription_life_save = null;\r\n            subscription_life_save = subscriptions.find((item) => {\r\n                return item.membership_type === \"lifesaving\";\r\n            })\r\n\r\n            let sub_status = subscription?.status ?? null;\r\n            let lifesaving_status = subscription_life_save?.status ?? null;\r\n\r\n            let result = {\r\n                subscription: subscription,\r\n                status_sub: sub_status,\r\n                lifesaving_status: lifesaving_status,\r\n                show_notification: null,\r\n                block_elements: false,\r\n                total_webpages: total_webpages,\r\n                total_funnels: total_funnels,\r\n                total_websites: total_websites,\r\n            }\r\n\r\n            if((sub_status === \"canceled\" || sub_status === null) && lifesaving_status !== \"active\"){\r\n                result.show_notification = \"show_warning_delete\";\r\n                result.block_elements = true;\r\n            }\r\n\r\n            if((sub_status === \"canceled\" || sub_status === null) && lifesaving_status === \"active\"){\r\n                result.show_notification = \"show_info_lifesaving\";\r\n                result.block_elements = true;\r\n            }\r\n\r\n            if((sub_status !== \"canceled\" && sub_status !== null)){\r\n                result.show_notification = null;\r\n                result.block_elements = false;\r\n            }\r\n\r\n            // set this to avoid low quantities for some fields i case of sub funnels 1.2\r\n            if(membership_type === \"funnels\" && (subscription ?? null) !== null){\r\n                result.max_funnels = 5;\r\n                result.max_webpages = 1;\r\n                result.max_products = 100;\r\n                result.max_leads = 1500;\r\n                result.max_forms = 1500;\r\n                result.max_orders = 1500;\r\n                result.max_sessions = 50000;\r\n            }\r\n\r\n            function search_value(benefits, field, default_value = 0){\r\n                if(typeof benefits[field] !== \"undefined\"){\r\n                  return benefits[field].is_unlimited ? Infinity : (benefits[field].value + default_value)\r\n                }\r\n                return default_value ?? 0;\r\n            }\r\n\r\n            if((membership_type === \"suite\" || membership_type === \"funnels\") && (subscription ?? null) !== null){\r\n                let benefits = Ramda.clone(subscription.plan.benefits);\r\n\r\n                if(membership_type !== \"suite\"){\r\n                    result.max_funnels = 5;\r\n                    result.max_webpages = 1;\r\n                    result.max_products = 100;\r\n                    result.max_leads = 1500;\r\n                    result.max_forms = 1500;\r\n                    result.max_orders = 1500;\r\n                    result.max_sessions = 50000;\r\n                }\r\n\r\n                \r\n\r\n                result.max_funnels = search_value(benefits,\"embudos\", result.max_funnels);\r\n                result.max_webpages = search_value(benefits,\"websites\", result.max_webpages);\r\n                result.max_products = search_value(benefits,\"productos\", result.max_products);\r\n                result.max_orders = search_value(benefits,\"ordenes_al_mes\", result.max_orders);\r\n                result.max_leads = search_value(benefits,\"leads_por_mes\", result.max_leads);\r\n                result.max_forms = search_value(benefits,\"formularios_por_mes\", result.max_forms);\r\n                result.max_sessions = search_value(benefits,\"sesiones_por_mes\", result.max_sessions);  \r\n            }\r\n            if((membership_type === \"suite_website\") && (subscription ?? null) !== null){\r\n                let benefits = Ramda.clone(subscription.plan.benefits);\r\n\r\n                result.max_funnels = search_value(benefits,\"embudos\", result.max_funnels);\r\n                result.max_webpages = search_value(benefits,\"websites\", result.max_webpages);\r\n                result.max_products = search_value(benefits,\"productos\", result.max_products);\r\n                result.max_orders = search_value(benefits,\"ordenes_al_mes\", result.max_orders);\r\n                result.max_leads = search_value(benefits,\"leads_por_mes\", result.max_leads);\r\n                result.max_forms = search_value(benefits,\"formularios_por_mes\", result.max_forms);\r\n                result.max_sessions = search_value(benefits,\"sesiones_por_mes\", result.max_sessions);\r\n            }\r\n\r\n\r\n            \r\n            let tags = User?.more_tags ?? \"\";\r\n            if(typeof tags === \"string\"){\r\n                tags = (User?.more_tags ?? \"\").split(\",\");\r\n                tags.push(User?.user_from_campaign ?? \"\");\r\n            }\r\n            \r\n\r\n            tags.forEach(function(tag){\r\n                if(tag === \"testing3pod\"){\r\n                    result.max_funnels = 10000;\r\n                    result.max_webpages = 10000;\r\n                    result.max_products = 2000;\r\n                    result.max_leads = 2500;\r\n                    result.max_forms = 2500;\r\n                    result.max_orders = 2500;\r\n                    result.max_sessions = 50000;\r\n                }\r\n            })\r\n            \r\n            return result;\r\n        },\r\n        /**\r\n         * \r\n         * @param {UserInterface} user\r\n         */\r\n        get_websites_subscription: (user)=>{\r\n            let subscriptions = user?.subscriptions ?? [];\r\n            let subscription = null;\r\n            subscriptions.forEach((sub)=>{\r\n                if(sub.membership_type === \"funnels\"){\r\n                    subscription = subscription;\r\n                }\r\n            })\r\n            subscriptions.forEach((sub)=>{\r\n                if((sub.membership_type === \"suite\" || sub.membership_type === \"suite_website\") && subscription === null){\r\n                    subscription = sub;\r\n                }\r\n            })\r\n\r\n\r\n            return subscription;\r\n        },\r\n        /**\r\n         * \r\n         * @param {UserInterface} User \r\n         * @returns Object\r\n        */\r\n        get_suite_sub: function(User = null){\r\n            if(User == null){\r\n                User = window.user ?? window.user2;\r\n            }\r\n            const app = this;\r\n            let sub_statuses = app.get_subscription_status(User, \"suite\");\r\n            \r\n            let sub_statuses_funnels = app.get_subscription_status(User, \"funnels\");\r\n            let sub_statuses_website = app.get_subscription_status(User, \"suite_website\");\r\n\r\n            let block_buttons = false;\r\n\r\n            // block if both, suite and suite_website are canceled\r\n            if(sub_statuses_website.show_notification  === \"show_warning_delete\"){\r\n                if(sub_statuses.show_notification === \"show_warning_delete\"){\r\n                    block_buttons = true;\r\n                }\r\n            }\r\n\r\n\r\n            // if OLD funnels membership is canceled SET block, otherwhise set funnels as sub_statuses\r\n            if(sub_statuses_funnels.show_notification  === \"show_warning_delete\"){\r\n                if(sub_statuses.show_notification === \"show_warning_delete\"){\r\n                    block_buttons = true;\r\n                }\r\n            }else{\r\n                sub_statuses = sub_statuses_funnels;\r\n            }\r\n\r\n\r\n            // if Suite Website is not canceled but suite is canceled is ACTIVE.\r\n            if(sub_statuses.show_notification  === \"show_warning_delete\"){\r\n                if(sub_statuses_website.show_notification !== \"show_warning_delete\"){\r\n                    sub_statuses = sub_statuses_website;\r\n                }\r\n            }\r\n            \r\n\r\n            return {sub_statuses, block_buttons}\r\n        },\r\n        /**\r\n         * \r\n         * @param {UserInterface} User \r\n         * @returns Object\r\n         */\r\n        get_all_subs_status: (User)=>{    \r\n            if(User == null){\r\n                User = window.user ?? window.user2\r\n            }     \r\n            /**\r\n             * @type {Array.<SubscriptionsInterface>}\r\n             */   \r\n            let subscriptions = User.subscriptions;\r\n            let has_at_least_one_active = false;\r\n            let has_trialing_active = false;\r\n            let all_canceled = false;\r\n            let show_notification = null;\r\n            let has_lifesaving = false;\r\n            let block_elements = false;\r\n            subscriptions.map((subscription)=>{\r\n                if(subscription.membership_type !== \"lifesaving\"){\r\n                    if(subscription.status === \"active\" || subscription.status === \"trialing\" || subscription.status === \"past_due\"){\r\n                        has_at_least_one_active = true;\r\n                    }\r\n                    if(subscription.status === \"trialing\"){\r\n                        has_at_least_one_active = true;\r\n                    }\r\n                }\r\n                \r\n                if(subscription.membership_type === \"lifesaving\"){\r\n                    if(subscription.status === \"active\"){\r\n                        \r\n                        has_lifesaving = true;\r\n                    }\r\n                }\r\n            })\r\n\r\n            function set_all_canceled(){\r\n                all_canceled = true;\r\n                block_elements = true;\r\n                show_notification = \"show_warning_delete\";\r\n\r\n                if(has_lifesaving){\r\n                    show_notification = \"show_info_lifesaving\";\r\n                }\r\n            }\r\n\r\n            if(!has_at_least_one_active && subscriptions.length > 0){\r\n                set_all_canceled();\r\n            }\r\n\r\n            if(subscriptions.length === 0){\r\n                set_all_canceled();\r\n            }\r\n\r\n            let results = {\r\n                all_canceled: all_canceled,\r\n                has_at_least_one_active: has_at_least_one_active,\r\n                canceled__has_lifesaving: (all_canceled && has_lifesaving),\r\n                canceled__no_lifesaving: (all_canceled && has_lifesaving === false),\r\n                has_lifesaving: has_lifesaving,\r\n                has_trialing_active: has_trialing_active,\r\n                show_notification: show_notification,\r\n                block_elements: block_elements,\r\n            }\r\n            \r\n            return results\r\n\r\n        },\r\n        \r\n        use_turnstile_token: function(callback){\r\n            callback = callback || function(){};\r\n            update((data)=>{\r\n                if(data.turnstile_token === null){\r\n                    console.warn(\"Probably the previus instance was already used, create a new one.\");\r\n                }\r\n                callback(`${data.turnstile_token}`);\r\n                data.turnstile_token = null;\r\n                return data;\r\n            })\r\n        },\r\n        addMethod: function(field, func){\r\n            if(typeof func !== \"function\"){\r\n                throw(\"Error, '\"+field+\"' is not a function\");\r\n            }\r\n            update(( data )=>{\r\n                data.methods[field] = func;\r\n                return data;\r\n            })\r\n        },\r\n        validateAdminPermission: function (permission){\r\n            try {\r\n                if(RouterStore.get().controller_name === \"superuser\"){return true;}\r\n                return ApplicationData.get().admin.roles.some((item)=> item === permission)\r\n            } catch (error) {\r\n                console.error(error);\r\n                return false;\r\n            }\r\n        },\r\n        addCrmProperties: function(properties = null){\r\n            update(( data )=>{\r\n                data.user = data.user || {};\r\n                data.user.crm = data.user.crm || {};\r\n\r\n                data.user.crm.crm_properties = properties;\r\n                return data;\r\n            })\r\n        },\r\n\r\n        updateObject: update,\r\n        update: function(field, new_data){            \r\n            update(( data )=>{\r\n                data[field] = new_data;\r\n                return data;\r\n            })\r\n        },\r\n        get: function(){\r\n            return application_data;\r\n        }\r\n    }\r\n\r\n    return dataApp;\r\n}\r\n\r\n\r\nconst ApplicationData = appData();\r\nexport {ApplicationData, turnstile_pk}","import { calendari18n } from \"./calendari18n\";\r\n\r\nclass FormatDate \r\n{\r\n    \r\n    constructor(date, timezone = \"America/Bogota\", region = \"en-US\")\r\n    {\r\n\r\n        let count = 0;\r\n        if(typeof date === \"string\"){\r\n            date = date.split(\"+\")[0];\r\n            date = date.split(\"T\").join(\" \");\r\n            date = date + \"+00:00\"\r\n            if (count === 0) {\r\n                count += 1;\r\n            }\r\n            \r\n        }\r\n\r\n        timezone = window?.default_timezone ?? timezone;\r\n        const app = this;\r\n        this.is_null_date = false;\r\n        if(date === null){\r\n            this.is_null_date = true;\r\n        }\r\n        \r\n        let date_object = new Date(new Date(date).toLocaleString(region, {timeZone: timezone}))\r\n\r\n        \r\n\r\n\r\n/*         if(region !== \"en\"){\r\n            date_object = new Date(new Date()).toLocaleString(region, {timeZone: timezone});\r\n            console.log(date_object);\r\n        } */\r\n        \r\n\r\n        this.month = date_object.toLocaleString('default', { month: 'long', /*timeZone: timezone*/});\r\n        \r\n        this.month_date = date_object.getMonth()+1;\r\n        if(`${this.month_date}`.length === 1){\r\n            this.month_date = `0${this.month_date}`\r\n        }\r\n\r\n        try {\r\n            this.month = calendari18n().months[date_object.getMonth()];\r\n        } catch (error) {\r\n            \r\n        }\r\n\r\n        \r\n        this.day = date_object.getDate();\r\n        this.year = date_object.getFullYear();\r\n        this.minutes = null;\r\n        this.hours = null;\r\n        this.only_hours = null;\r\n        this.formatAMPM = (date)=>{\r\n            var hours = date.getHours();\r\n            var minutes = date.getMinutes();\r\n            var ampm = hours >= 12 ? 'pm' : 'am';\r\n            hours = hours % 12;\r\n            hours = hours ? hours : 12; // the hour '0' should be '12'\r\n            minutes = minutes < 10 ? '0'+minutes : minutes;\r\n            minutes = `${minutes}`;\r\n            var strTime = hours + ':' + minutes + ' ' + ampm;\r\n\r\n            app.hours = hours;\r\n            app.minutes = minutes;\r\n            app.only_hours = `${hours}`;\r\n            return strTime;\r\n        }\r\n\r\n        this.hour = this.formatAMPM(date_object);\r\n\r\n    }\r\n    /**\r\n     * @returns format: Diciembre 18, 2022\r\n     */\r\n    month_day_year(){\r\n        if(this.is_null_date){return null;}\r\n        return `${this.month} ${this.day}, ${this.year}`\r\n    }\r\n\r\n    /**\r\n     * @returns format: Diciembre 18, 2022 : 4:00 PM\r\n     */\r\n    month_day_year_time(){\r\n        if(this.is_null_date){return null;}\r\n        return `${this.month} ${this.day}, ${this.year} : ${this.hour}`\r\n    }\r\n\r\n    /**\r\n     * @returns format: Diciembre 18, 2022 : 4\r\n     */\r\n    month_day_year_only_hours(){\r\n        if(this.is_null_date){return null;}\r\n        return `${this.month} ${this.day}, ${this.year} : ${this.only_hours}:00`\r\n    }\r\n\r\n    /**\r\n     * @returns format: 2022-12-28\r\n     */\r\n    system_date(){\r\n        if(isNaN(this.year)){return null;};\r\n        if(isNaN(this.month_date)){return null;};\r\n        if(isNaN(this.day)){return null;};\r\n        if(this.is_null_date){return null;}\r\n\r\n        return `${this.year}-${this.month_date}-${this.day}`\r\n    }\r\n\r\n    /**\r\n     * @returns format: 2022-12-28\r\n     */\r\n    system_date_hour(){\r\n        if(isNaN(this.year)){return null;};\r\n        if(isNaN(this.month_date)){return null;};\r\n        if(isNaN(this.day)){return null;};\r\n        if(this.is_null_date){return null;}\r\n\r\n        let hour = this.hour.split(\"pm\").join(\"PM\");\r\n        hour = hour.split(\"am\").join(\"AM\");\r\n\r\n\r\n        return `${this.year}-${this.month_date}-${this.day} ${hour}`;\r\n    }\r\n\r\n    /**\r\n     * @returns format: 18 de Diciembre de 2022\r\n    */\t\r\n    full_day_month_year(division){\r\n        division = division || \" de\";\r\n        if(window.language !== \"es\"){\r\n            return `${this.month} ${this.day}, ${this.year}`\r\n        }\r\n        if(this.is_null_date){return null;}\r\n        return `${this.day}${division} ${this.month}${division} ${this.year}`\r\n    }\r\n\r\n    /**\r\n     * @returns format: 18 de Diciembre\r\n    */\t\r\n    full_day_month(division){\r\n        division = division || \" de\";\r\n        if(window.language !== \"es\"){\r\n            return `${this.month} ${this.day}`\r\n        }\r\n        if(this.is_null_date){return null;}\r\n        return `${this.day}${division} ${this.month}`\r\n    }\r\n\r\n        /**\r\n     * @returns format: 18 de Diciembre de 2022\r\n    */\t\r\n    full_day_month_year_time(division, set_time = false){\r\n        division = division || \" de\";\r\n        if(window.language !== \"es\"){\r\n            return `${this.month} ${this.day}, ${this.year}`\r\n        }\r\n\r\n        let full_time = this.hour.split(\"pm\").join(\"PM\");\r\n        full_time = full_time.split(\"am\").join(\"AM\");\r\n        if(set_time === true){\r\n            `${this.hour} : ${this.minutes}`\r\n        }\r\n\r\n        if(this.is_null_date){return null;}\r\n        return `${this.day}${division} ${this.month}${division} ${this.year} ${full_time}`\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns  6:00pm\r\n     */\r\n    only_hours(){\r\n        return `${this.hour}`\r\n    }\r\n\r\n    convertUTCToLocal(utcTimestamp) {\r\n        // Parse the UTC timestamp\r\n        const utcDate = new Date(utcTimestamp);\r\n      \r\n        // Get the timezone offset in milliseconds\r\n        const offset = utcDate.getTimezoneOffset() * 60000;\r\n      \r\n        // Adjust the UTC date for local time\r\n        const localDate = new Date(utcDate.getTime() + offset);\r\n      \r\n        // Format the date as desired\r\n        const formattedDate = localDate.toLocaleDateString(); // Or use Intl.DateTimeFormat for more customization\r\n      \r\n        return formattedDate;\r\n      }\r\n\r\n    getStartOfDay(system_date){\r\n        system_date = system_date.split(\"T\")[0];\r\n        return new Date(`${system_date} 00:00:00`);\r\n    }\r\n\r\n    getEndOfDay(system_date){\r\n        system_date = system_date.split(\"T\")[0];\r\n        return new Date(`${system_date} 23:59:59`);\r\n    }\r\n}\r\n\r\nexport {FormatDate}","import { Turpial } from \"./turpial\";\r\n\r\nconst calendari18n = ()=> {\r\n    return {\r\n        months: Turpial.$WindowObject?.ContentsAll?.ctn_4hwhZ1.split(',') ?? ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'],\r\n        monthsShort: Turpial.$WindowObject?.ContentsAll?.ctn_hEGra9.split(',') ?? ['Ene','Feb','Mar','Abr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dic'],\r\n        weekdays: Turpial.$WindowObject?.ContentsAll?.ctn_FS9ZZz.split(',') ?? ['Domingo','Lunes','Martes','MiÃ©rcoles','Jueves','Viernes','SÃ¡bado'],\r\n        weekdaysShort: Turpial.$WindowObject?.ContentsAll?.ctn_yaYQow.split(',') ?? ['Dom','Lun','Mar','MiÃ©','Jue','Vie','SÃ¡b'],\r\n        weekdaysAbbrev: Turpial.$WindowObject?.ContentsAll?.ctn_wNyGq_.split(',') ?? ['D','L','M','M','J','V','S']\r\n    }\r\n}\r\n\r\nclass FormatDate \r\n{\r\n    /**\r\n     * @returns format: Diciembre 18, 2022\r\n     */\r\n    month_day_year(date){\r\n        date = new Date(date);\r\n        const month = date.toLocaleString('default', { month: 'long' });\r\n        const day = new Date(date).getDate();\r\n        const year = new Date(date).getFullYear();\r\n\r\n        return `${month} ${day}, ${year}`\r\n    }\r\n\r\n    /**\r\n     * @returns format: 18 de Diciembre de 2022\r\n    */\r\n    full_day_month_year(date, division){\r\n        division = division || \"de\";\r\n        date = new Date(date);\r\n        const month = date.toLocaleString('default', { month: 'long' });\r\n        const day = new Date(date).getDate();\r\n        const year = new Date(date).getFullYear();\r\n\r\n        return `${day} ${division} ${month} ${division} ${year}`\r\n    }\r\n}\r\n\r\n\r\n\r\nexport { calendari18n, FormatDate }","import { ApplicationData } from \"../ApplicationData\";\r\nimport { FormatDate } from \"../FormatDate\";\r\n\r\n/**\r\n * @typedef {object} TimeData\r\n * @property {number} hour - La hora (0-23).\r\n * @property {number} minute - El minuto (0-59).\r\n */\r\n\r\n/**\r\n * @typedef {object} ExceptionData\r\n * @property {\"date\"|\"weekday\"} type - El tipo de excepciÃ³n (\"date\" para una fecha especÃ­fica, \"weekday\" para un dÃ­a de la semana).\r\n * @property {string} [date] - La fecha de la excepciÃ³n en formato ISO 8601 (ej. \"YYYY-MM-DD\"). Obligatorio si `type` es \"date\".\r\n * @property {number} [weekday] - El dÃ­a de la semana (0 para Domingo, 6 para SÃ¡bado). Obligatorio si `type` es \"weekday\".\r\n * @property {\"inclusive\"|\"exclusive\"} exception_type - Si la excepciÃ³n habilita (`inclusive`) o deshabilita (`exclusive`) el soporte.\r\n * @property {number} start_time_hour - La hora de inicio de la excepciÃ³n (0-23).\r\n * @property {number} start_time_minute - El minuto de inicio de la excepciÃ³n (0-59).\r\n * @property {number} end_time_hour - La hora de fin de la excepciÃ³n (0-23).\r\n * @property {number} end_time_minute - El minuto de fin de la excepciÃ³n (0-59).\r\n */\r\n\r\n/**\r\n * @class support_customer_service\r\n * @description\r\n * Clase para gestionar y mostrar el horario de atenciÃ³n al cliente,\r\n * con soporte para conversiones entre zonas horarias y manejo de excepciones.\r\n * Permite definir un horario base en una zona horaria de \"soporte\" (ej. oficina central)\r\n * y mostrarlo o evaluarlo en la zona horaria del usuario final.\r\n */\r\nclass support_customer_service {\r\n\r\n    /**\r\n     * Crea una instancia de support_customer_service.\r\n     * @param {object} [data={}] - Objeto de configuraciÃ³n inicial para el horario de soporte.\r\n     * @param {number} [data.start_day=1] - El dÃ­a de la semana en que comienza el horario regular de soporte (0=Domingo, 6=SÃ¡bado). Por defecto es 1 (Lunes).\r\n     * @param {number} [data.end_day=5] - El dÃ­a de la semana en que termina el horario regular de soporte. Por defecto es 5 (Viernes).\r\n     * @param {TimeData} [data.start_time={hour: 9, minute: 0}] - La hora de inicio del soporte en la `supportTimeZone`.\r\n     * @param {TimeData} [data.end_time={hour: 19, minute: 30}] - La hora de fin del soporte en la `supportTimeZone`.\r\n     * @param {Array<ExceptionData>} [data.exceptions=[]] - Un array de objetos que definen horarios excepcionales o feriados.\r\n     * @param {string} [data.supportTimeZone='America/Bogota'] - La zona horaria donde se define el horario base de soporte.\r\n     * Ejemplo: 'America/Bogota', 'America/New_York', 'Europe/Madrid'.\r\n     * @param {string} [userTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone] - La zona horaria del usuario que consulta el servicio.\r\n     * Por defecto, la zona horaria detectada por el navegador.\r\n     * @param {function} [callback=function(){}] - Una funciÃ³n de callback.\r\n     */\r\n    constructor(data = {}, userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone, callback = function(){}) {\r\n        /**\r\n         * El dÃ­a de la semana en que comienza el horario regular de soporte (0=Domingo, 6=SÃ¡bado).\r\n         * @type {number}\r\n         */\r\n        this.start_day = data?.start_day ?? 1; // Lunes\r\n        \r\n        /**\r\n         * El dÃ­a de la semana en que termina el horario regular de soporte (0=Domingo, 6=SÃ¡bado).\r\n         * @type {number}\r\n         */\r\n        this.end_day = data?.end_day ?? 5;     // Viernes\r\n        \r\n        /**\r\n         * La hora de inicio del soporte en la `supportTimeZone`.\r\n         * @type {TimeData}\r\n         */\r\n        this.start_time = {\r\n            \"hour\": data?.start_time?.hour ?? 9,\r\n            \"minute\": data?.start_time?.minute ?? 0\r\n        };\r\n        \r\n        /**\r\n         * La hora de fin del soporte en la `supportTimeZone`.\r\n         * @type {TimeData}\r\n         */\r\n        this.end_time = {\r\n            \"hour\": data?.end_time?.hour ?? 19,\r\n            \"minute\": data?.end_time?.minute ?? 30\r\n        };\r\n        \r\n        /**\r\n         * Array de objetos que definen horarios excepcionales o feriados.\r\n         * @type {Array<ExceptionData>}\r\n         */\r\n        this.exceptions = data?.exceptions ?? [];\r\n        \r\n        /**\r\n         * FunciÃ³n de callback.\r\n         * @type {function}\r\n         */\r\n        this.callback = callback ?? function(){};\r\n        \r\n        /**\r\n         * La zona horaria donde se define el horario base de soporte.\r\n         * Este es el \"origen\" del horario.\r\n         * @type {string}\r\n         */\r\n        this.supportTimeZone = data?.supportTimeZone ?? 'America/Bogota'; \r\n        \r\n        /**\r\n         * La zona horaria del usuario final que consulta el servicio.\r\n         * El horario se adaptarÃ¡ a esta zona.\r\n         * @type {string}\r\n         */\r\n        this.userTimeZone = userTimeZone; \r\n    }\r\n\r\n    /**\r\n     * Convierte una hora y minuto especÃ­ficos desde la zona horaria de soporte\r\n     * a una zona horaria de destino (`targetTimeZone`).\r\n     * Esta funciÃ³n es crucial para adaptar el horario de soporte a la perspectiva del usuario.\r\n     *\r\n     * @private\r\n     * @param {number} hour - La hora (0-23) en la zona horaria de soporte.\r\n     * @param {number} minute - El minuto (0-59) en la zona horaria de soporte.\r\n     * @param {Date} referenceDate - Una fecha de referencia. Se utiliza el aÃ±o, mes y dÃ­a de esta fecha\r\n     * para manejar correctamente el horario de verano (DST) si aplica en ambas zonas.\r\n     * @param {string} targetTimeZone - La zona horaria a la que se desea convertir (ej. `this.userTimeZone`).\r\n     * @returns {{hour: number, minute: number}} Un objeto que contiene la hora y el minuto convertidos a la zona horaria objetivo.\r\n     */\r\n    convertSupportTimeToTargetTimeZone(hour, minute, referenceDate, targetTimeZone) {\r\n        const app = this;\r\n        \r\n        // Obtener el aÃ±o, mes y dÃ­a de la `referenceDate` en la `supportTimeZone`.\r\n        let supportDateParts = new Intl.DateTimeFormat('en-US', {\r\n            year: 'numeric', month: '2-digit', day: '2-digit',\r\n            timeZone: app.supportTimeZone\r\n        }).formatToParts(referenceDate);\r\n\r\n        let year = parseInt(supportDateParts.find(p => p.type === 'year').value, 10);\r\n        let month = parseInt(supportDateParts.find(p => p.type === 'month').value, 10); // 1-indexed for Intl.DateTimeFormat\r\n        let day = parseInt(supportDateParts.find(p => p.type === 'day').value, 10);\r\n\r\n        // Calcular el punto absoluto en el tiempo (UTC timestamp)        \r\n        // Creamos una fecha UTC base para el dÃ­a de referencia. Esto representa las 00:00:00 UTC de ese dÃ­a.\r\n        let baseUtcDate = new Date(Date.UTC(\r\n            referenceDate.getFullYear(), // Importante usar el aÃ±o del objeto Date original para el DST\r\n            referenceDate.getMonth(),    // El mes para Date.UTC es 0-indexado\r\n            referenceDate.getDate()\r\n        ));\r\n\r\n        // Obtenemos el offset de la `supportTimeZone` respecto a UTC para `baseUtcDate`.\r\n        // Para esto, convertimos `baseUtcDate` (que es UTC) a una fecha localizada en `supportTimeZone`,\r\n        // y luego calculamos la diferencia con la misma fecha en UTC.\r\n        // Esto nos da el offset real en milisegundos para esa zona y esa fecha (considerando DST).\r\n        let d_support = new Date(baseUtcDate.toLocaleString('en-US', { timeZone: app.supportTimeZone }));\r\n        let d_utc = new Date(baseUtcDate.toLocaleString('en-US', { timeZone: 'UTC' }));\r\n        let offsetMs_support = d_support.getTime() - d_utc.getTime(); // Diferencia en ms entre supportTimeZone y UTC\r\n\r\n        // Calculamos el momento exacto en UTC (en milisegundos)\r\n        // que corresponde a la `hour:minute` en la `supportTimeZone`.\r\n        // Partimos de la `baseUtcDate` (00:00:00 UTC del dÃ­a),\r\n        // le sumamos la hora y minuto del soporte,\r\n        // y luego ajustamos por el `offsetMs_support`.\r\n        // Si la zona de soporte es UTC-5, `offsetMs_support` serÃ¡ negativo (-5 horas).\r\n        // Al restar un valor negativo, estamos sumando las 5 horas para llegar al UTC correcto.\r\n        let targetMomentInMs = baseUtcDate.getTime() + (hour * 60 + minute) * 60 * 1000 - offsetMs_support;\r\n\r\n        // Creamos un objeto Date que representa este punto absoluto en el tiempo (UTC).\r\n        let absolutePointInTime = new Date(targetMomentInMs);\r\n\r\n        // Formatear ese punto absoluto en el tiempo a la `targetTimeZone`.\r\n        // `Intl.DateTimeFormat` se encargarÃ¡ de convertir el timestamp UTC a la hora local\r\n        // en la `targetTimeZone`, aplicando correctamente su propio DST si aplica.\r\n        let parts = new Intl.DateTimeFormat('en-US', {\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            hourCycle: 'h23', // Formato 24 horas para facilitar el parseo\r\n            timeZone: targetTimeZone \r\n        }).formatToParts(absolutePointInTime);\r\n\r\n        let h = parseInt(parts.find(p => p.type === 'hour').value, 10);\r\n        let m = parseInt(parts.find(p => p.type === 'minute').value, 10);\r\n        \r\n        return { hour: h, minute: m };\r\n    }\r\n\r\n    /**\r\n     * Determina si el botÃ³n de soporte debe estar deshabilitado en una fecha y hora dadas.\r\n     * Considera el horario regular, la zona horaria del usuario y las excepciones.\r\n     * @param {Date} date - La fecha y hora actual que se desea evaluar (normalmente la fecha/hora actual del usuario).\r\n     * @returns {boolean} `true` si el soporte estÃ¡ deshabilitado, `false` si estÃ¡ habilitado.\r\n     */\r\n    isSupportButtonDisabled(date) {\r\n        const app = this;\r\n        let userCurrentParts = new Intl.DateTimeFormat('en-US', {\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            weekday: 'short',\r\n            hourCycle: 'h23',\r\n            timeZone: app.userTimeZone\r\n        }).formatToParts(date);\r\n\r\n        let userCurrentHour = parseInt(userCurrentParts.find(p => p.type === 'hour').value, 10);\r\n        let userCurrentMinute = parseInt(userCurrentParts.find(p => p.type === 'minute').value, 10);\r\n        let userWeekdayStr = userCurrentParts.find(p => p.type === 'weekday').value;\r\n\r\n        let weekdays = { Sun: 0, Mon: 1, Tue: 2, Wed: 3, Thu: 4, Fri: 5, Sat: 6 };\r\n        let userCurrentDay = weekdays[userWeekdayStr];\r\n        let userCurrentTotalMinutes = userCurrentHour * 60 + userCurrentMinute;\r\n\r\n        let convertedStartTime = app.convertSupportTimeToTargetTimeZone(app.start_time.hour, app.start_time.minute, date, app.userTimeZone);\r\n        let convertedEndTime = app.convertSupportTimeToTargetTimeZone(app.end_time.hour, app.end_time.minute, date, app.userTimeZone);\r\n\r\n        let startTotalMinutes = convertedStartTime.hour * 60 + convertedStartTime.minute;\r\n        let endTotalMinutes = convertedEndTime.hour * 60 + convertedEndTime.minute;\r\n\r\n        if (userCurrentDay < app.start_day || userCurrentDay > app.end_day && app.exceptions.length === 0) {\r\n            return true; \r\n        }\r\n\r\n        let isWithinSchedule = userCurrentTotalMinutes >= startTotalMinutes && userCurrentTotalMinutes <= endTotalMinutes;\r\n\r\n        for (let exception of app.exceptions ?? []) {\r\n            let applies = false;\r\n\r\n            if (exception.type === \"date\") {\r\n                const exceptionDateObj = new Date(exception.date); \r\n                \r\n                let exceptionDatePartsInSupportTZ = new Intl.DateTimeFormat('en-US', {\r\n                    year: 'numeric', month: '2-digit', day: '2-digit', timeZone: app.supportTimeZone\r\n                }).formatToParts(exceptionDateObj); \r\n\r\n                let exceptionYear = exceptionDatePartsInSupportTZ.find(p => p.type === 'year').value;\r\n                let exceptionMonth = exceptionDatePartsInSupportTZ.find(p => p.type === 'month').value;\r\n                let exceptionDay = exceptionDatePartsInSupportTZ.find(p => p.type === 'day').value;\r\n                let exceptionDateStr = `${exceptionYear}-${exceptionMonth}-${exceptionDay}`;\r\n\r\n                let currentDatePartsInSupportTZ = new Intl.DateTimeFormat('en-US', {\r\n                    year: 'numeric', month: '2-digit', day: '2-digit', timeZone: app.supportTimeZone\r\n                }).formatToParts(date); \r\n                \r\n                let currentYear = currentDatePartsInSupportTZ.find(p => p.type === 'year').value;\r\n                let currentMonth = currentDatePartsInSupportTZ.find(p => p.type === 'month').value;\r\n                let currentDay = currentDatePartsInSupportTZ.find(p => p.type === 'day').value;\r\n                let currentDateStr = `${currentYear}-${currentMonth}-${currentDay}`;\r\n                \r\n                applies = (exceptionDateStr === currentDateStr);\r\n\r\n            } else if (exception.type === \"weekday\") {\r\n                applies = (userCurrentDay === exception.weekday);\r\n            }\r\n\r\n            if (!applies) {\r\n                continue;\r\n            }\r\n\r\n            const isFullDayException = (\r\n                exception.start_time_hour === 0 &&\r\n                exception.start_time_minute === 0 &&\r\n                exception.end_time_hour === 23 &&\r\n                exception.end_time_minute === 59\r\n            );\r\n\r\n            let withinExceptionTime;\r\n            if (isFullDayException) {\r\n                withinExceptionTime = true; \r\n            } else {\r\n                let convertedExceptionStart = app.convertSupportTimeToTargetTimeZone(exception.start_time_hour, exception.start_time_minute, date, app.userTimeZone);\r\n                let convertedExceptionEnd = app.convertSupportTimeToTargetTimeZone(exception.end_time_hour, exception.end_time_minute, date, app.userTimeZone);\r\n\r\n                let exceptionStart = convertedExceptionStart.hour * 60 + convertedExceptionStart.minute;\r\n                let exceptionEnd = convertedExceptionEnd.hour * 60 + convertedExceptionEnd.minute;\r\n\r\n                // Manejo de cruce de medianoche para horarios parciales si end_time es al dÃ­a siguiente\r\n                if (exceptionEnd < exceptionStart) { // La excepciÃ³n cruza la medianoche del usuario\r\n                    withinExceptionTime = (userCurrentTotalMinutes >= exceptionStart || userCurrentTotalMinutes <= exceptionEnd);\r\n                } else {\r\n                    withinExceptionTime = userCurrentTotalMinutes >= exceptionStart && userCurrentTotalMinutes <= exceptionEnd;\r\n                }\r\n            }\r\n            \r\n            if (withinExceptionTime) {\r\n                if (exception.exception_type === \"exclusive\") {\r\n                    return true;\r\n                } else if (exception.exception_type === \"inclusive\") {\r\n                    return false; \r\n                }\r\n            }\r\n        }\r\n\r\n        if (userCurrentDay < app.start_day || userCurrentDay > app.end_day) {\r\n            return true; \r\n        }\r\n        \r\n        return !isWithinSchedule;\r\n    }\r\n\r\n    /**\r\n     * Genera un texto amigable que muestra el horario de atenciÃ³n al cliente,\r\n     * adaptado a la zona horaria del usuario.\r\n     * @param {Date} [date=new Date()] - La fecha de referencia para la cual se calcularÃ¡ el horario.\r\n     * Por defecto, es la fecha y hora actual del sistema.\r\n     * @returns {string} Una cadena de texto que describe el horario de atenciÃ³n, como \"Lun-Vie 08:00 a. m. a 07:30 p. m.\".\r\n     */\r\n    isAvailableSupportText(date = new Date()) { \r\n        const app = this;\r\n        let lang = \"en\";\r\n        if(typeof ApplicationData !== \"undefined\"){\r\n            try {\r\n                lang = ApplicationData.get().user.lang;\r\n            } catch (error) {\r\n                lang = \"es\";\r\n            }\r\n        }else{\r\n            lang = \"es\";\r\n        }\r\n        \r\n        \r\n        // Nombres de los dÃ­as de la semana segÃºn el idioma.\r\n        let daysES = [\"Dom\", \"Lun\", \"Mar\", \"MiÃ©\", \"Jue\", \"Vie\", \"SÃ¡b\"];\r\n        let daysEN = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n        let days = lang === \"es\" ? daysES : daysEN;\r\n\r\n        /**\r\n         * FunciÃ³n auxiliar para formatear una hora y minuto especÃ­ficos\r\n         * (que ya estÃ¡n en la zona horaria del USUARIO) a un formato de cadena legible.\r\n         * @param {number} hour - La hora (0-23) a formatear.\r\n         * @param {number} minute - El minuto (0-59) a formatear.\r\n         * @returns {string} La hora formateada (ej. \"08:00 a. m.\" o \"09:30 PM\").\r\n         */\r\n        let formatDisplayTime = (hour, minute) => {\r\n            // Se crea una fecha temporal para que `Intl.DateTimeFormat` pueda aplicar\r\n            // el formato de hora y minuto deseado, considerando la `userTimeZone`.\r\n            let tempDate = new Date(date.getFullYear(), date.getMonth(), date.getDate(), hour, minute, 0, 0);\r\n\r\n            return new Intl.DateTimeFormat(lang === \"es\" ? 'es-CO' : 'en-US', {\r\n                hour: '2-digit',\r\n                minute: '2-digit',\r\n                hour12: lang === \"es\", // Usar AM/PM si el idioma es espaÃ±ol\r\n                timeZone: app.userTimeZone // Formatear para la zona del USUARIO\r\n            }).format(tempDate);\r\n        };\r\n\r\n        // Convertir las horas de inicio/fin del horario regular (definidas en `supportTimeZone`)\r\n        // a la zona horaria del usuario (`userTimeZone`) para la visualizaciÃ³n.\r\n        let convertedStartTime = app.convertSupportTimeToTargetTimeZone(app.start_time.hour, app.start_time.minute, date, app.userTimeZone);\r\n        let convertedEndTime = app.convertSupportTimeToTargetTimeZone(app.end_time.hour, app.end_time.minute, date, app.userTimeZone);\r\n\r\n        let startDay = days[app.start_day];\r\n        let endDay = days[app.end_day];\r\n        let startTime = formatDisplayTime(convertedStartTime.hour, convertedStartTime.minute);\r\n        let endTime = formatDisplayTime(convertedEndTime.hour, convertedEndTime.minute);\r\n\r\n        let baseText = lang === \"es\"\r\n            ? `${startDay}-${endDay} ${startTime} a ${endTime}`\r\n            : `${startDay}-${endDay} ${startTime} to ${endTime}`;\r\n\r\n        // Filtrar y procesar excepciones de tipo \"weekday\" que son \"inclusive\" (horarios adicionales).\r\n        let weekdayExceptions = app.exceptions.filter(e => e.type === \"weekday\" && e.exception_type === \"inclusive\");\r\n\r\n        if (weekdayExceptions.length > 0) {\r\n            let exceptionText = weekdayExceptions.map(e => {\r\n                let dayName = days[e.weekday];\r\n                // Convertir las horas de la excepciÃ³n (definidas en `supportTimeZone`)\r\n                // a la zona horaria del usuario (`userTimeZone`) para la visualizaciÃ³n.\r\n                let convertedExceptionStart = app.convertSupportTimeToTargetTimeZone(e.start_time_hour, e.start_time_minute, date, app.userTimeZone);\r\n                let convertedExceptionEnd = app.convertSupportTimeToTargetTimeZone(e.end_time_hour, e.end_time_minute, date, app.userTimeZone);\r\n\r\n                let start = formatDisplayTime(convertedExceptionStart.hour, convertedExceptionStart.minute);\r\n                let end = formatDisplayTime(convertedExceptionEnd.hour, convertedExceptionEnd.minute);\r\n\r\n                return `${dayName} ${start} ${lang === \"es\" ? \"a\" : \"to\"} ${end}`;\r\n            }).join(`, \\n`); // Unir mÃºltiples excepciones con coma y salto de lÃ­nea\r\n\r\n            baseText += `,\\n ${exceptionText}`;\r\n        }\r\n\r\n        return baseText;\r\n    }\r\n}\r\n\r\nfunction isSupportButtonDisabled(date) {\r\n    // Get the current day of the week (0 for Sunday, 6 for Saturday)\r\n    const day = date.getDay();\r\n    \r\n    // Get the current hour (0-23)\r\n    const hour = date.getHours();\r\n\r\n    // get current minutes 0-60\r\n    const minutes = date.getMinutes();\r\n\r\n    // Check if it's within business hours on weekdays\r\n    if(day >= 1 && day <= 5){ \r\n        // Check if it's within business hours on weekdays\r\n        if(hour >= 7 && (hour + (minutes/60) < 19.50)){\r\n            return false; // Button enabled on weekdays between 9AM and 7:30PM EST\r\n        }\r\n    }\r\n    \r\n    // Check if it's within business hours on Saturday\r\n    if (day === 6 && hour >= 8 && hour < 12) {\r\n        return false; // Button enabled on Saturday between 9AM and 6PM EST\r\n    }\r\n\r\n    // on sunday: block.\r\n    if(day > 6){\r\n        return false;\r\n    }\r\n    \r\n    // All other cases, button is disabled\r\n    return true;\r\n}\r\n\r\nfunction isAvailableSupportText(){\r\n\r\n    let content = \"Lun-Vie 9:00AM-7:30PM, SÃ¡b 8:00AM-12:00PM EST\"\r\n    if(typeof ApplicationData !== \"undefined\"){\r\n        try {\r\n            if(ApplicationData.get().user.lang !== \"es\"){\r\n                content = \"Mon-Fri 09:00-19:30, SÃ¡b 08:00-12:00 EST\"\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    return content;\r\n}\r\n\r\n\r\n\r\nasync function get_support_customer_service_data() {\r\n    if(window.support_customer_service_data){\r\n        return window.support_customer_service_data;\r\n    }\r\n\r\n    let formatDate = new FormatDate(new Date());\r\n    let monthday = formatDate.month_day_year_only_hours();\r\n\r\n    // if superuser cookie is present use unixtime\r\n    try {\r\n        if(window.Cookies.get(\"AppSessionSuperUser\") !== null){\r\n            monthday = new Date().getTime();\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n    \r\n    const IS_ONLINE = window.IS_ONLINE;\r\n    let response = await fetch(`https://bucket.3pod.io/tools/${IS_ONLINE ? \"prod\": \"test\"}/support_service_availability.json?time=${monthday}`);\r\n    let data = await response.json();\r\n    window.support_customer_service_data = data;\r\n    return data;\r\n}\r\n\r\n\r\nwindow.isSupportButtonDisabled = isSupportButtonDisabled;\r\n\r\nexport {\r\n    get_support_customer_service_data,\r\n    isSupportButtonDisabled,\r\n    isAvailableSupportText,\r\n    support_customer_service\r\n}","import { \r\n    get_support_customer_service_data, \r\n    support_customer_service \r\n} from \"../libraries/coreApp/support_customer_service\";\r\n\r\n\r\nwindow.support_disabled = false;\r\nasync function set_support_service(){\r\n    const today = new Date();\r\n    let support_customer_service_class = null;\r\n    let support_customer_service_data = await get_support_customer_service_data();\r\n    if (support_customer_service_data !== null && typeof support_customer_service_data !== \"undefined\") {\r\n        support_customer_service_class = new support_customer_service(support_customer_service_data);\r\n    }else{\r\n        throw(\"support_customer_service_data are undefined or null\");\r\n    }\r\n\r\n\r\n    const isButtonDisabled = support_customer_service_class.isSupportButtonDisabled(today);\r\n\r\n    window.support_disabled = isButtonDisabled;\r\n}\r\n\r\nset_support_service();\r\n\r\n/**\r\n * To BUILD\r\n * npm run build\r\n * set: input: \"src/controllers/support_service_controller.js\",\r\n * output: \"default/public/assets/js\"\r\n * \r\n * in ROLLUP\r\n * \r\n */"],"names":["noop","subscriber_queue","writable","value","start","stop","subscribers","Set","set","new_value","b","a","run_queue","length","subscriber","push","i","update","fn","subscribe","run","invalidate","add","size","delete","window","__svelte","v","RouterStoreType","parameters","props","action_name","role","controller_name","has_footer","has_sidebar","has_header","has_navbar_mobile","has_space_fixed_to_top","classes","Footer","subtemplate","BoxHeader","user","styles_box","breadcrumbs","setGridStylesAuto","updateGridStyles","updateHeaderComponent","updateSidebarComponent","updateNavBarMobileComponent","updateBoxHeaderComponent","updateFooterComponent","updateHasHeader","updateHasFooter","updateHasSidebar","updateHasNavbarMobile","updateHasSpaceFixedToTop","updateProperties","properties","RouterStore","defaultElement","field","new_data","data","updateField","object","Object","values","map","item","key","name","keys","updateBreadcrumbs","get","returns","routerStore","WindowObject","DocumentObject","has_window","has_document","globalThis","$page","document","Turpial","static","constructor","tpObj","this","birds","un","r","searchStr","where","what","position","search","replacement","target","split","join","find","selector","getElementById","ext","allowStateEvents","loadModulesOnRoute","autoloader","autoloader_folder","cache","public_path","core_path","folder","loader","httpRequests","show","loaderShow","hide","loaderHide","views","statusResources","resources","myComponents","random_string","result","characters","charAt","Math","floor","random","selectData","arr","return_key","turpial","forEach","dta","component","applyProps","tag","applying","elements","querySelectorAll","Array","prototype","slice","call","el","implement","limit","interval","setInterval","console","warn","clearInterval","$WindowObject","addEventListener","readyState","obj","app","extendTo","extends","customElements","olderVerBrow","define","HTMLElement","super","view","models","sources","controller","urls","filesLoaded","inject","files","file","head","tagName","innerHTML","text","isArray","script","clodeNode","appendChild","fetch","type","cancelOnResend","headers","options","method","attributes","url","multidata","ready","loaded","getString","clone","fetching","body","remove","request","XMLHttpRequest","open","headersValues","header","k","option","setRequestHeader","onload","status","elementTag","resource","responseText","createElement","attribute","setAttribute","content","rel","media","href","onerror","idRequest","id","abort","e","send","counter","check","forceLoad","texts","include","linkCSS","process","nodes","link","mount","cloneNode","includeCSS","path","file_name","routing","Path","last","pop","LastFolder","subfolder","load","action","base","module","urlPath","parameter","error","DataView","routes","getHost","loadModule","relativeModules","location","Host","slash","SearchPublichPath","substr","n","param","route","host","change","output","history","title","go","back","forward","router","stateEvent","setTimeout","components","Paths","assign","moduleController","loadController","loadAction","loadParameters","moduleAction","self","historyEvents","URLNoHASH","createHistoryEvent","callback","event","onpopstate","com","template","html","replacemets","engine","reArrange","element","number","structure","items","searchall","replaceby","url_params","URLSearchParams","appName","children","node","createMap","turpial_app_id","getAttribute","realDOMElement","read","selectorApp","Number","isInteger","insert","justUpdate","render","string","isHTML","child","parent","parentNode","insertBefore","nextSibling","replaceChild","innerText","mapping","LiteralsString","dom_elem","firstElementChild","place","things","log","settings","attrs","setAttrsValues","Values","setAttrsNames","pushAttrs","createTag","location_host","_curry1","f1","arguments","_isPlaceholder","apply","type$1","val","undefined","toString","_clone","deep","_ObjectMap","_isPrimitive","pattern","copy","copiedValue","cachedCopy","hasOwnProperty","create","getPrototypeOf","Date","valueOf","RegExp","source","flags","global","ignoreCase","multiline","sticky","unicode","dotAll","hashedKey","hash","bucket","p","clone$1","turnstile_pk","IS_ONLINE","ApplicationData","application_data","main_components_loaded","is_online","api_host","api_host_base","api_stream","api_stream_base","version_user","assets_path","enviroment","authenticate","website_title","is_testing_user","plan_limits_testing","go_to_plans","projects","stripeTokens","live","test","stripeTokens_v2","stripe_key","admin","superuser","loaded_turnstile","turnstile_token","show_onboarding","on_error_session_redirect","create_turnstile_instance","turnstile_id","turnstile","sitekey","verify_user_version","metadata_3pod_2_0","metadata","version_to_show","more_tags","is_show_v2_admin","some","subscription_funnel","subscription_suite","subscriptions","sub","membership_type","Cookies","is_testing","only_tag","tag_testing","tags","user_from_campaign","tag_test","get_subscription","user2","subscription","get_subscription_status","User","subrequest","total_webpages","current_total_webpages","total_funnels","current_total_funnels","total_websites","current_total_websites","subscription_life_save","sub_status","lifesaving_status","status_sub","show_notification","block_elements","search_value","benefits","default_value","is_unlimited","Infinity","max_funnels","max_webpages","max_products","max_leads","max_forms","max_orders","max_sessions","Ramda.clone","plan","get_websites_subscription","get_suite_sub","sub_statuses","sub_statuses_funnels","sub_statuses_website","block_buttons","get_all_subs_status","has_at_least_one_active","all_canceled","has_lifesaving","set_all_canceled","canceled__has_lifesaving","canceled__no_lifesaving","has_trialing_active","results","use_turnstile_token","addMethod","func","methods","validateAdminPermission","permission","roles","addCrmProperties","crm","crm_properties","updateObject","appData","FormatDate","date","timezone","region","default_timezone","is_null_date","date_object","toLocaleString","timeZone","month","month_date","getMonth","ContentsAll","ctn_4hwhZ1","ctn_hEGra9","ctn_FS9ZZz","ctn_yaYQow","ctn_wNyGq_","calendari18n","day","getDate","year","getFullYear","minutes","hours","only_hours","formatAMPM","getHours","getMinutes","ampm","strTime","hour","month_day_year","month_day_year_time","month_day_year_only_hours","system_date","isNaN","system_date_hour","full_day_month_year","division","language","full_day_month","full_day_month_year_time","set_time","full_time","convertUTCToLocal","utcTimestamp","utcDate","offset","getTimezoneOffset","getTime","toLocaleDateString","getStartOfDay","getEndOfDay","support_customer_service","userTimeZone","Intl","DateTimeFormat","resolvedOptions","start_day","end_day","start_time","minute","end_time","exceptions","supportTimeZone","convertSupportTimeToTargetTimeZone","referenceDate","targetTimeZone","supportDateParts","formatToParts","parseInt","baseUtcDate","UTC","d_support","d_utc","offsetMs_support","targetMomentInMs","absolutePointInTime","parts","hourCycle","isSupportButtonDisabled","userCurrentParts","weekday","userCurrentHour","userCurrentMinute","userCurrentDay","Sun","Mon","Tue","Wed","Thu","Fri","Sat","userCurrentTotalMinutes","convertedStartTime","convertedEndTime","startTotalMinutes","endTotalMinutes","isWithinSchedule","exception","applies","exceptionDateObj","exceptionDatePartsInSupportTZ","exceptionDateStr","currentDatePartsInSupportTZ","withinExceptionTime","start_time_hour","start_time_minute","end_time_hour","end_time_minute","convertedExceptionStart","convertedExceptionEnd","exceptionStart","exceptionEnd","exception_type","isAvailableSupportText","lang","days","formatDisplayTime","tempDate","hour12","format","startDay","endDay","startTime","endTime","baseText","weekdayExceptions","filter","dayName","end","getDay","support_disabled","async","today","support_customer_service_class","support_customer_service_data","monthday","response","json","get_support_customer_service_data","isButtonDisabled","set_support_service"],"mappings":"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"}